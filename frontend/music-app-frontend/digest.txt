Directory structure:
‚îî‚îÄ‚îÄ music-app-frontend/
    ‚îú‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îú‚îÄ‚îÄ eslint.config.js
    ‚îú‚îÄ‚îÄ index.html
    ‚îú‚îÄ‚îÄ nginx.conf
    ‚îú‚îÄ‚îÄ package.json
    ‚îú‚îÄ‚îÄ postcss.config.js
    ‚îú‚îÄ‚îÄ tailwind.config.js
    ‚îú‚îÄ‚îÄ tsconfig.app.json
    ‚îú‚îÄ‚îÄ tsconfig.json
    ‚îú‚îÄ‚îÄ tsconfig.node.json
    ‚îú‚îÄ‚îÄ vite.config.ts
    ‚îú‚îÄ‚îÄ .dockerignore
    ‚îú‚îÄ‚îÄ .env.example
    ‚îî‚îÄ‚îÄ src/
        ‚îú‚îÄ‚îÄ App.tsx
        ‚îú‚îÄ‚îÄ index.css
        ‚îú‚îÄ‚îÄ main.tsx
        ‚îú‚îÄ‚îÄ components/
        ‚îÇ   ‚îú‚îÄ‚îÄ ErrorBoundary.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ ProtectedRoute.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ layout/
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppLogo.tsx
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthPageLayout.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ music/
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AlbumItem.tsx
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Display.tsx
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DisplayAlbum.tsx
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DisplayHome.tsx
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.tsx
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Player.tsx
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SongItem.tsx
        ‚îÇ   ‚îî‚îÄ‚îÄ ui/
        ‚îÇ       ‚îú‚îÄ‚îÄ avatar.tsx
        ‚îÇ       ‚îú‚îÄ‚îÄ Button.tsx
        ‚îÇ       ‚îú‚îÄ‚îÄ GoogleOAuthButton.tsx
        ‚îÇ       ‚îú‚îÄ‚îÄ Input.tsx
        ‚îÇ       ‚îú‚îÄ‚îÄ LoadingSpinner.tsx
        ‚îÇ       ‚îú‚îÄ‚îÄ Modal.tsx
        ‚îÇ       ‚îú‚îÄ‚îÄ NotificationBanner.tsx
        ‚îÇ       ‚îî‚îÄ‚îÄ PasswordInput.tsx
        ‚îú‚îÄ‚îÄ constants/
        ‚îÇ   ‚îú‚îÄ‚îÄ api.constants.ts
        ‚îÇ   ‚îî‚îÄ‚îÄ ui.constants.ts
        ‚îú‚îÄ‚îÄ context/
        ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.tsx
        ‚îÇ   ‚îî‚îÄ‚îÄ MusicContext.tsx
        ‚îú‚îÄ‚îÄ hooks/
        ‚îÇ   ‚îú‚îÄ‚îÄ useForm.ts
        ‚îÇ   ‚îî‚îÄ‚îÄ useNotification.ts
        ‚îú‚îÄ‚îÄ pages/
        ‚îÇ   ‚îú‚îÄ‚îÄ ForgotPasswordPage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ HomePage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ MusicApp.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ MusicBrowsePage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ OAuthCallbackPage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ ProfileSettingsPage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ RegisterPage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ ResendVerificationPage.tsx
        ‚îÇ   ‚îú‚îÄ‚îÄ ResetPasswordPage.tsx
        ‚îÇ   ‚îî‚îÄ‚îÄ VerifyEmailPage.tsx
        ‚îú‚îÄ‚îÄ services/
        ‚îÇ   ‚îú‚îÄ‚îÄ api.ts
        ‚îÇ   ‚îú‚îÄ‚îÄ apiClient.ts
        ‚îÇ   ‚îî‚îÄ‚îÄ musicApi.ts
        ‚îú‚îÄ‚îÄ types/
        ‚îÇ   ‚îî‚îÄ‚îÄ auth.types.ts
        ‚îî‚îÄ‚îÄ utils/
            ‚îî‚îÄ‚îÄ validation.ts

================================================
FILE: README.md
================================================
# Music App - Frontend

## Overview
React + TypeScript frontend with Tailwind CSS for the Music App authentication system.

## Prerequisites
- Node.js 18+
- npm or yarn

## Installation
```bash
npm install
```

## Configuration
Copy `.env.example` to `.env` and configure API endpoints.

## Running Locally
```bash
npm run dev
```

Access at `http://localhost:5173`

## Building for Production
```bash
npm run build
```

## Project Structure
```
src/
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ components/      # Reusable UI components
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ pages/          # Page components
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ context/        # React context providers
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ services/       # API service layer
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ hooks/          # Custom React hooks
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ types/          # TypeScript type definitions
√¢‚Äù≈ì√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ constants/      # Application constants
√¢‚Äù‚Äù√¢‚Äù‚Ç¨√¢‚Äù‚Ç¨ utils/          # Utility functions
```

## Features
- Email/password authentication
- Google OAuth2 integration
- Email verification
- Password reset
- Profile management
- Account deactivation

## Technology Stack
- React 18
- TypeScript
- TanStack Query (React Query)
- Tailwind CSS
- Vite
- React Router

## Recent Improvements

### Component Abstractions
- **AuthPageLayout**: Consistent layout for all authentication pages
- **PasswordInput**: Reusable password input with visibility toggle
- **Avatar**: Unified user avatar display component
- **GoogleOAuthButton**: Extracted OAuth button for reuse

### Custom Hooks
- **useForm**: Generic form handling with validation support
- **useNotification**: Notification state management with auto-dismiss

### API Layer
- Centralized Axios client configuration with interceptors
- Global 401 error handling
- Simplified API method signatures

### Code Quality
- Removed redundant type definitions
- Consistent use of UI constants across components
- Improved error handling patterns


================================================
FILE: Dockerfile
================================================
# Stage 1: Build stage
FROM node:20-alpine AS build

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci

# Copy source code
COPY . .

# Accept build arguments (from docker-compose or command line)
ARG VITE_API_BASE_URL
ARG VITE_OAUTH_GOOGLE_URL

# Make them available during build
ENV VITE_API_BASE_URL=$VITE_API_BASE_URL
ENV VITE_OAUTH_GOOGLE_URL=$VITE_OAUTH_GOOGLE_URL

# Build with these environment variables baked in
RUN npm run build

# Stage 2: Production stage
FROM nginx:alpine

# Remove default nginx website
RUN rm -rf /usr/share/nginx/html/*

# Copy built files
COPY --from=build /app/dist /usr/share/nginx/html

# Copy nginx configuration
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]


================================================
FILE: eslint.config.js
================================================
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])



================================================
FILE: index.html
================================================
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>music-app-frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>



================================================
FILE: nginx.conf
================================================
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # Enable gzip compression for better performance
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml;

    # Route all requests to index.html (for React Router)
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Cache static assets for 1 year
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Don't cache index.html
    location = /index.html {
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }
}



================================================
FILE: package.json
================================================
{
  "name": "music-app-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": " vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@tanstack/react-query": "^5.90.6",
    "axios": "^1.13.1",
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "react-router-dom": "^7.9.5"
  },
  "devDependencies": {
    "@eslint/js": "^9.36.0",
    "@types/node": "^24.6.0",
    "@types/react": "^19.1.16",
    "@types/react-dom": "^19.1.9",
    "@vitejs/plugin-react": "^5.0.4",
    "autoprefixer": "^10.4.21",
    "eslint": "^9.36.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.22",
    "globals": "^16.4.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.18",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.45.0",
    "vite": "^7.1.7"
  }
}



================================================
FILE: postcss.config.js
================================================
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}



================================================
FILE: tailwind.config.js
================================================
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}


================================================
FILE: tsconfig.app.json
================================================
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}



================================================
FILE: tsconfig.json
================================================
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}



================================================
FILE: tsconfig.node.json
================================================
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}



================================================
FILE: vite.config.ts
================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})



================================================
FILE: .dockerignore
================================================
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Build output
dist/
build/

# IDE files
.idea/
.vscode/
*.swp
*.swo

# OS files
.DS_Store
Thumbs.db

# Git
.git/
.gitignore

# Environment files
.env
.env.local
.env.*.local

# Testing
coverage/

# Misc
*.log
.cache/


================================================
FILE: .env.example
================================================
# API Configuration
VITE_API_BASE_URL=http://localhost:8080/api
VITE_OAUTH_GOOGLE_URL=http://localhost:8080/oauth2/authorization/google


================================================
FILE: src/App.tsx
================================================
import { BrowserRouter, Routes, Route, } from "react-router-dom";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { AuthProvider } from "./context/AuthContext";
import ErrorBoundary from "./components/ErrorBoundary";
import LoginPage from "./pages/LoginPage";
import RegisterPage from "./pages/RegisterPage";
import OAuthCallbackPage from "./pages/OAuthCallbackPage";
import ForgotPasswordPage from "./pages/ForgotPasswordPage";
import ResetPasswordPage from "./pages/ResetPasswordPage";
import VerifyEmailPage from "./pages/VerifyEmailPage";
import ResendVerificationPage from "./pages/ResendVerificationPage";
import ProfileSettingsPage from "./pages/ProfileSettingsPage";
import ProtectedRoute from "./components/ProtectedRoute";
import { MusicProvider } from "./context/MusicContext";
import MusicApp from "./pages/MusicApp";

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retry: 1,
      refetchOnWindowFocus: false,
    },
  },
});

function App() {
  return (
    <ErrorBoundary>
      <QueryClientProvider client={queryClient}>
        <BrowserRouter>
          <AuthProvider>
            <MusicProvider>
              <Routes>
                <Route path="/login" element={<LoginPage />} />
                <Route path="/register" element={<RegisterPage />} />
                <Route path="/forgot-password" element={<ForgotPasswordPage />} />
                <Route path="/reset-password" element={<ResetPasswordPage />} />
                <Route path="/verify-email" element={<VerifyEmailPage />} />
                <Route path="/resend-verification" element={<ResendVerificationPage />} />
                <Route path="/auth/callback" element={<OAuthCallbackPage />} />
                <Route
                  path="/profile-settings"
                  element={
                    <ProtectedRoute>
                      <ProfileSettingsPage />
                    </ProtectedRoute>
                  }
                />
                <Route
                  path="/*"
                  element={
                    <ProtectedRoute>
                      <MusicApp />
                    </ProtectedRoute>
                  }
                />
              </Routes>
            </MusicProvider>
          </AuthProvider>
        </BrowserRouter>
      </QueryClientProvider>
    </ErrorBoundary>
  );
}

export default App;



================================================
FILE: src/index.css
================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: #2e2e2e;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background-color: #888;
  border-radius: 10px;
  border: 3px solid #2e2e2e;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

::-webkit-scrollbar-corner {
  background: #2e2e2e;
}


================================================
FILE: src/main.tsx
================================================
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)



================================================
FILE: src/components/ErrorBoundary.tsx
================================================
import React, { Component, type ErrorInfo, type ReactNode } from 'react';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
}

class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false,
    error: null,
  };

  public static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Uncaught error:', error, errorInfo);
  }

  public render() {
    if (this.state.hasError) {
      if (this.props.fallback) {
        return this.props.fallback;
      }

      return (
        <div className="min-h-screen bg-black flex items-center justify-center px-4">
          <div className="text-center">
            <div className="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg className="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth={2}
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                />
              </svg>
            </div>
            <h2 className="text-2xl font-bold text-white mb-2">Something went wrong</h2>
            <p className="text-gray-400 mb-6">
              {this.state.error?.message || 'An unexpected error occurred'}
            </p>
            <button
              onClick={() => window.location.reload()}
              className="px-6 py-3 bg-green-500 hover:bg-green-400 text-black rounded-lg transition font-medium"
            >
              Reload Page
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;


================================================
FILE: src/components/ProtectedRoute.tsx
================================================
import { Navigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

export default function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { isAuthenticated, isLoading } = useAuth();

  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-2xl">Loading...</div>
      </div>
    );
  }

  if (!isAuthenticated) {
    return <Navigate to="/login" replace />;
  }

  return <>{children}</>;
}


================================================
FILE: src/components/layout/AppLogo.tsx
================================================
import React from 'react';
import { Link } from 'react-router-dom';

interface AppLogoProps {
  size?: 'sm' | 'md' | 'lg';
  showText?: boolean;
  linkTo?: string;
}

const AppLogo: React.FC<AppLogoProps> = ({ size = 'md', showText = false, linkTo = '/' }) => {
  const sizes = {
    sm: { container: 'w-8 h-8', emoji: 'text-xl' },
    md: { container: 'w-12 h-12', emoji: 'text-2xl' },
    lg: { container: 'w-16 h-16', emoji: 'text-3xl' },
  };

  const logo = (
    <div className="flex items-center space-x-3">
      <div
        className={`${sizes[size].container} bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/50`}
      >
        <span className={sizes[size].emoji}>√∞≈∏≈Ω¬µ</span>
      </div>
      {showText && <h1 className="text-2xl font-bold text-white">Music App</h1>}
    </div>
  );

  if (linkTo) {
    return <Link to={linkTo}>{logo}</Link>;
  }

  return logo;
};

export default AppLogo;


================================================
FILE: src/components/layout/AuthPageLayout.tsx
================================================
import React from 'react';
import { Link } from 'react-router-dom';
import AppLogo from './AppLogo';

interface AuthPageLayoutProps {
  title: string;
  subtitle?: string;
  children: React.ReactNode;
  showLogo?: boolean;
}

const AuthPageLayout: React.FC<AuthPageLayoutProps> = ({
  title,
  subtitle,
  children,
  showLogo = true,
}) => {
  return (
    <div className="min-h-screen bg-black flex items-center justify-center px-4">
      <div className="w-full max-w-md">
        {showLogo && (
          <div className="text-center mb-10">
            <Link to="/" className="inline-block">
              <AppLogo size="lg" />
            </Link>
          </div>
        )}
        <div className="bg-[#181818] rounded-lg p-8 border border-neutral-800">
          <h1 className="text-3xl font-bold text-white text-center mb-2">{title}</h1>
          {subtitle && <p className="text-gray-400 text-center mb-8">{subtitle}</p>}
          {children}
        </div>
      </div>
    </div>
  );
};
export default AuthPageLayout;


================================================
FILE: src/components/music/AlbumItem.tsx
================================================
import { useNavigate } from "react-router-dom";

interface AlbumItemProps {
  _id: string;
  image: string;
  name: string;
  desc: string;
}

export default function AlbumItem({ _id, image, name, desc }: AlbumItemProps) {
  const navigate = useNavigate();
  
  return (
    <div
      onClick={() => navigate(`/album/${_id}`)}
      className="min-w-[180px] p-2 px-3 rounded cursor-pointer hover:bg-[#ffffff26]"
    >
      <img className="rounded" src={image} alt={name} />
      <p className="font-bold mt-2 mb-1">{name}</p>
      <p className="text-slate-200 text-sm">{desc}</p>
    </div>
  );
}


================================================
FILE: src/components/music/Display.tsx
================================================
import { Route, Routes, useLocation } from "react-router-dom";
import DisplayHome from "./DisplayHome";
import DisplayAlbum from "./DisplayAlbum";
import { useEffect, useRef } from "react";
import { useMusic } from "../../context/MusicContext";

export default function Display() {
  const { albumsData } = useMusic();
  const displayRef = useRef<HTMLDivElement>(null);
  const location = useLocation();
  const isAlbum = location.pathname.includes("album");
  const albumId = isAlbum ? location.pathname.split("/").pop() : "";
  
  // Find album in the full albums list, not filtered
  const bgColor = isAlbum && albumId
    ? albumsData.find((a) => a._id === albumId)?.bgColour || "#121212"
    : "#121212";

  useEffect(() => {
    if (displayRef.current) {
      displayRef.current.style.background = isAlbum 
        ? `linear-gradient(${bgColor},#121212)` 
        : "#121212";
    }
  }, [isAlbum, bgColor]);

  return (
    <div ref={displayRef} className="w-[100%] m-2 px-6 pt-4 rounded bg-[#121212] text-white overflow-auto lg:w-[75%] lg:ml-0">
        <Routes>
          <Route path="/" element={<DisplayHome />} />
          <Route path="/album/:id" element={<DisplayAlbum />} />
        </Routes>
    </div>
  );
}


================================================
FILE: src/components/music/DisplayAlbum.tsx
================================================
import { useParams } from "react-router-dom";
import { useEffect, useState } from "react";
import { useMusic } from "../../context/MusicContext";
import Navbar from "./Navbar";

export default function DisplayAlbum() {
  const { id } = useParams();
  const { albumsData, songsData, playWithId, track, playStatus, play, pause } = useMusic();
  const [album, setAlbum] = useState<any>(null);
  const [hoveredId, setHoveredId] = useState<string | null>(null);

  useEffect(() => {
    const found = albumsData.find((item) => item._id === id);
    setAlbum(found);
  }, [albumsData, id]);

  if (!album) return null;

  const albumSongs = songsData.filter((s) => s.album === album.name);

  return (
    <>
      <Navbar />
      <div className="mt-10 flex gap-8 flex-col md:flex-row md:items-end">
        <img className="w-48 rounded" src={album.image} alt={album.name} />
        <div className="flex flex-col gap-3">
          <p>Playlist</p>
          <h2 className="text-5xl font-bold mb-2 md:text-7xl">{album.name}</h2>
          <h4>{album.desc}</h4>
        </div>
      </div>
      <div className="grid grid-cols-3 sm:grid-cols-[0.5fr_2fr_2fr_0.5fr] mt-10 mb-4 pl-2 text-[#a7a7a7]">
        <p><b className="mr-4">#</b>Title</p>
        <p>Name</p>
        <p className="hidden sm:block">Album</p>
        <p className="text-center">Duration</p>
      </div>
      <hr />
      {albumSongs.map((song, idx) => (
        <div
          key={song._id}
          onClick={() => (hoveredId === song._id && playStatus ? pause() : playWithId(song._id))}
          onMouseEnter={() => setHoveredId(song._id)}
          onMouseLeave={() => setHoveredId(null)}
          className="grid grid-cols-3 sm:grid-cols-[0.5fr_2fr_2fr_0.5fr] gap-2 p-2 items-center text-[#a7a7a7] hover:bg-[#ffffff26] cursor-pointer"
        >
          <div className="flex items-center">
            {track?._id === song._id && playStatus ? (
              <span className="mr-4">√¢‚Äì¬∂</span>
            ) : hoveredId === song._id ? (
              <span className="mr-4 cursor-pointer" onClick={play}>√¢‚Äì¬∂</span>
            ) : (
              <b className="mr-4">{idx + 1}</b>
            )}
            <img className="w-10 mr-5" src={song.image} alt={song.name} />
          </div>
          <p className="text-[15px] font-bold">{song.name}</p>
          <p className="text-[15px] hidden sm:block">{song.album}</p>
          <p className="text-[15px] text-center">{song.duration}</p>
        </div>
      ))}
    </>
  );
}


================================================
FILE: src/components/music/DisplayHome.tsx
================================================
import { useMusic } from "../../context/MusicContext";
import AlbumItem from "./AlbumItem";
import Navbar from "./Navbar";
import SongItem from "./SongItem";

export default function DisplayHome() {
  const { 
    filteredSongsData, 
    filteredAlbumsData, 
    viewFilter 
  } = useMusic();

  return (
    <>
      <Navbar />

      {/* Songs Section */}
      {(viewFilter === "all" || viewFilter === "music") && (
        <div className="mb-8">
          <h1 className="my-6 font-bold text-2xl">Today's biggest hits</h1>
          <div className="flex overflow-x-auto gap-6 pb-4 scrollbar-hide">
            {filteredSongsData.map((item) => (
              <SongItem key={item._id} {...item} />
            ))}
          </div>
        </div>
      )}

      {/* Albums Section */}
      {viewFilter === "all" && (
        <div className="mb-8">
          <h1 className="my-6 font-bold text-2xl">Featured Charts</h1>
          <div className="flex overflow-x-auto gap-6 pb-4 scrollbar-hide">
            {filteredAlbumsData.map((item) => (
              <AlbumItem key={item._id} {...item} />
            ))}
          </div>
        </div>
      )}
    </>
  );
}


================================================
FILE: src/components/music/Navbar.tsx
================================================
// src/components/music/Navbar.tsx
import { useNavigate, Link } from "react-router-dom";
import { useAuth } from "../../context/AuthContext";
import { useMusic } from "../../context/MusicContext";

export default function Navbar() {
  const navigate = useNavigate();
  const { user } = useAuth();

  // Destructure everything once ‚Äî no duplicates!
  const { searchQuery, setSearchQuery, viewFilter, setViewFilter } = useMusic();

  return (
    <>
      {/* Top Navigation Bar */}
      <div className="w-full flex justify-between items-center font-semibold text-white mb-6">
        <div className="flex items-center gap-3">
          <button
            onClick={() => navigate(-1)}
            className="w-10 h-10 bg-black/70 rounded-full flex items-center justify-center hover:bg-black/90 transition"
          >
            ‚Üê
          </button>
          <button
            onClick={() => navigate(1)}
            className="w-10 h-10 bg-black/70 rounded-full flex items-center justify-center hover:bg-black/90 transition"
          >
            ‚Üí
          </button>
        </div>

        <div className="flex items-center gap-4">
          {/* Search Input */}
          <input
            type="text"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            placeholder="Search songs & albums..."
            className="w-96 px-5 py-3 bg-[#242424] rounded-full text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500"
          />

          {/* User Avatar */}
          <Link
            to="/profile-settings"
            className="w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-black font-bold text-lg hover:scale-105 transition"
          >
            {user?.username?.[0]?.toUpperCase() || "U"}
          </Link>
        </div>
      </div>

      {/* All / Music Filter Buttons */}
      <div className="flex gap-3">
        <button
          onClick={() => setViewFilter("all")}
          className={`px-10 py-3 rounded-full font-medium transition-all ${
            viewFilter === "all"
              ? "bg-white text-black"
              : "bg-[#282828] text-gray-300 hover:bg-[#383838]"
          }`}
        >
          All
        </button>
        <button
          onClick={() => setViewFilter("music")}
          className={`px-10 py-3 rounded-full font-medium transition-all ${
            viewFilter === "music"
              ? "bg-white text-black"
              : "bg-[#282828] text-gray-300 hover:bg-[#383838]"
          }`}
        >
          Music
        </button>
      </div>
    </>
  );
}


================================================
FILE: src/components/music/Player.tsx
================================================
import { useMusic } from "../../context/MusicContext";
import { useAuth } from "../../context/AuthContext";
import { Link } from "react-router-dom";

export default function Player() {
  const {
    track,
    playStatus,
    play,
    pause,
    previousSong,
    nextSong,
    audioRef,
    seekSong,
    seekBg,
    isLooping,
    toggleLoop,
    isShuffle,
    toggleShuffle,
    volume,
    handleVolumeChange,
    toggleMute,
    isMuted,
  } = useMusic();

  const { logout } = useAuth();

  if (!track) return null;

  const formatTime = (seconds: number) => {
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, "0")}`;
  };

  return (
    <div className="h-[10%] bg-[#181818] border-t border-neutral-800 px-4 flex items-center justify-between text-white">
      {/* Left: Current Track */}
      <div className="flex items-center gap-4 w-[30%]">
        <img src={track.image} alt={track.name} className="w-14 h-14 rounded" />
        <div>
          <h4 className="font-semibold text-sm">{track.name}</h4>
          <p className="text-xs text-gray-400">{track.desc}</p>
        </div>
        <button className="ml-4 text-gray-400 hover:text-white">
          <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 21c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-18C6.48 3 2 7.48 2 13h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-5.52-4.48-10-10-10z" />
          </svg>
        </button>
      </div>

      {/* Center: Controls */}
      <div className="flex flex-col items-center gap-2 w-[40%]">
        <div className="flex items-center gap-6">
          <button
            onClick={toggleShuffle}
            className={`${
              isShuffle ? "text-green-500" : "text-gray-400"
            } hover:text-white`}
          >
            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M10.59 9.17L6.83 5.41 5.41 6.83 9.17 10.59l1.42-1.42zM14.59 15.17L18.34 19 19.76 17.59 16 13.83l-1.41 1.34zM14.59 4l5.17 5.17-1.42 1.41L13.17 5.41 14.59 4zM4.24 19.76l5.17-5.17 1.41 1.41L5.66 21.17 4.24 19.76z" />
            </svg>
          </button>
          <button
            onClick={previousSong}
            className="text-white hover:scale-110 transition"
          >
            <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
            </svg>
          </button>
          <button
            onClick={playStatus ? pause : play}
            className="bg-white text-black rounded-full p-3 hover:scale-105 transition shadow-lg"
          >
            {playStatus ? (
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 4h4v16H6zm8 0h4v16h-4z" />
              </svg>
            ) : (
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z" />
              </svg>
            )}
          </button>
          <button
            onClick={nextSong}
            className="text-white hover:scale-110 transition"
          >
            <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6z" />
            </svg>
          </button>
          <button
            onClick={toggleLoop}
            className={`${
              isLooping ? "text-green-500" : "text-gray-400"
            } hover:text-white relative`}
          >
            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z" />
            </svg>
            {isLooping && (
              <span className="absolute -bottom-1 left-1/2 transform -translate-x-1/2 text-xs">
                1
              </span>
            )}
          </button>
        </div>

        {/* Seek Bar */}
        <div className="flex items-center gap-3 w-full text-xs">
          <span>
            {formatTime(Math.floor(audioRef.current?.currentTime || 0))}
          </span>

          <div
            ref={seekBg}
            onClick={seekSong}
            className="relative flex-1 h-1 bg-gray-600 rounded-full cursor-pointer group"
          >
            <div
              className="absolute h-full bg-white rounded-full transition-all"
              style={{
                width: audioRef.current?.duration
                  ? `${
                      (audioRef.current.currentTime /
                        audioRef.current.duration) *
                      100
                    }%`
                  : "0%",
              }}
            />
            <div
              className="absolute h-3 w-3 bg-white rounded-full -top-1 left-0 opacity-0 group-hover:opacity-100 transition-opacity"
              style={{
                left: audioRef.current?.duration
                  ? `${
                      (audioRef.current.currentTime /
                        audioRef.current.duration) *
                      100
                    }%`
                  : "0%",
              }}
            />
          </div>

          <span>{formatTime(Math.floor(audioRef.current?.duration || 0))}</span>
        </div>
      </div>

      {/* Right: Volume + Logout */}
      <div className="flex items-center gap-4 w-[30%] justify-end">
        <div className="flex items-center gap-2">
          <button onClick={toggleMute}>
            {isMuted || volume === 0 ? (
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM19 12c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
              </svg>
            ) : volume < 0.5 ? (
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zm-2.5 0c0 .78.37 1.48.97 2.03v-4.06c-.6.55-.97 1.25-.97 2.03zM3 9v6h4l5 5V4L7 9H3z" />
              </svg>
            ) : (
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
              </svg>
            )}
          </button>
          <input
            type="range"
            min="0"
            max="1"
            step="0.01"
            value={isMuted ? 0 : volume}
            onChange={handleVolumeChange}
            className="w-24 h-1 bg-gray-600 rounded-full appearance-none cursor-pointer"
          />
        </div>

        <button
          onClick={logout}
          className="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm font-medium transition"
        >
          Logout
        </button>
      </div>
    </div>
  );
}



================================================
FILE: src/components/music/Sidebar.tsx
================================================
import { useNavigate } from "react-router-dom";

export default function Sidebar() {
  const navigate = useNavigate();
  
  return (
    <div className="w-[25%] h-full p-2 flex-col gap-2 text-white hidden lg:flex">
      <div className="bg-[#121212] h-[15%] rounded flex flex-col justify-around">
        <div onClick={() => navigate("/")} className="flex items-center gap-3 pl-8 cursor-pointer">
          <span>üè†</span>
          <p className="font-bold">Home</p>
        </div>
      </div>
      <div className="bg-[#121212] h-[85%] rounded p-4">
        <div className="flex items-center gap-3 mb-4">
          <span>üìö</span>
          <p className="font-semibold">Your Library</p>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: src/components/music/SongItem.tsx
================================================
import { useMusic } from "../../context/MusicContext";

interface SongItemProps {
  _id: string;
  image: string;
  name: string;
  desc: string;
}

export default function SongItem({ _id, image, name, desc }: SongItemProps) {
  const { playWithId } = useMusic();
  
  return (
    <div
      onClick={() => playWithId(_id)}
      className="min-w-[180px] p-2 px-3 rounded cursor-pointer hover:bg-[#ffffff26]"
    >
      <img className="rounded" src={image} alt={name} />
      <p className="font-bold mt-2 mb-1">{name}</p>
      <p className="text-slate-200 text-sm">{desc}</p>
    </div>
  );
}


================================================
FILE: src/components/ui/avatar.tsx
================================================
import React from 'react';

interface AvatarProps {
  imageUrl?: string;
  username: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  className?: string;
}

const Avatar: React.FC<AvatarProps> = ({ imageUrl, username, size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'w-8 h-8 text-sm',
    md: 'w-10 h-10 text-base',
    lg: 'w-12 h-12 text-lg',
    xl: 'w-16 h-16 text-2xl',
  };

  if (imageUrl) {
    return (
      <img
        src={imageUrl}
        alt={`${username}'s avatar`}
        className={`${sizeClasses[size]} rounded-full object-cover ${className}`}
      />
    );
  }

  return (
    <div
      className={`${sizeClasses[size]} bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-bold ${className}`}
    >
      {username?.[0]?.toUpperCase() || '?'}
    </div>
  );
};

export default Avatar;


================================================
FILE: src/components/ui/Button.tsx
================================================
import React, { type ButtonHTMLAttributes } from 'react';

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
  fullWidth?: boolean;
  isLoading?: boolean;
}

const Button: React.FC<ButtonProps> = ({
  children,
  variant = 'primary',
  fullWidth = false,
  isLoading = false,
  disabled,
  className = '',
  ...props
}) => {
  const baseClasses = 'font-semibold py-4 px-6 rounded-full transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100';
  
  const variants = {
    primary: 'bg-green-500 hover:bg-green-400 text-black',
    secondary: 'bg-neutral-800 hover:bg-neutral-700 text-white',
    danger: 'bg-red-500 hover:bg-red-600 text-white',
    ghost: 'bg-transparent hover:bg-neutral-800 text-white border border-neutral-700',
  };

  const widthClass = fullWidth ? 'w-full' : '';

  return (
    <button
      className={`${baseClasses} ${variants[variant]} ${widthClass} ${className}`}
      disabled={disabled || isLoading}
      {...props}
    >
      {isLoading ? (
        <span className="flex items-center justify-center">
          <svg className="animate-spin -ml-1 mr-3 h-5 w-5" fill="none" viewBox="0 0 24 24">
            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
            <path
              className="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          Loading...
        </span>
      ) : (
        children
      )}
    </button>
  );
};

export default Button;


================================================
FILE: src/components/ui/GoogleOAuthButton.tsx
================================================
import React from 'react';
import { authApi } from '../../services/api';

interface GoogleOAuthButtonProps {
  text?: string;
  className?: string;
}

const GoogleOAuthButton: React.FC<GoogleOAuthButtonProps> = ({
  text = 'Continue with Google',
  className = '',
}) => {
  const handleGoogleLogin = () => {
    authApi.loginWithGoogle();
  };

  return (
    <button
      onClick={handleGoogleLogin}
      className={`w-full bg-white hover:bg-gray-100 text-black font-semibold py-4 rounded-full transition flex items-center justify-center space-x-3 transform hover:scale-105 ${className}`}
    >
      <svg className="w-5 h-5" viewBox="0 0 24 24">
        <path
          fill="#4285F4"
          d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
        />
        <path
          fill="#34A853"
          d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
        />
        <path
          fill="#FBBC05"
          d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
        />
        <path
          fill="#EA4335"
          d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
        />
      </svg>
      <span>{text}</span>
    </button>
  );
};

export default GoogleOAuthButton;


================================================
FILE: src/components/ui/Input.tsx
================================================
import React, { type InputHTMLAttributes } from 'react';

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ label, error, className = '', ...props }, ref) => {
    return (
      <div>
        {label && (
          <label className="block text-sm font-medium text-gray-300 mb-2">
            {label}
          </label>
        )}
        <input
          ref={ref}
          className={`w-full px-4 py-4 bg-neutral-800 border ${
            error ? 'border-red-500' : 'border-neutral-700'
          } rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 ${
            error ? 'focus:ring-red-500' : 'focus:ring-green-500'
          } focus:border-transparent transition ${className}`}
          {...props}
        />
        {error && <p className="mt-2 text-sm text-red-400">{error}</p>}
      </div>
    );
  }
);

Input.displayName = 'Input';

export default Input;


================================================
FILE: src/components/ui/LoadingSpinner.tsx
================================================
import React from 'react';

interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg';
  message?: string;
  fullScreen?: boolean;
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({
  size = 'md',
  message,
  fullScreen = false,
}) => {
  const sizeClasses = {
    sm: 'h-8 w-8',
    md: 'h-16 w-16',
    lg: 'h-24 w-24',
  };

  const spinner = (
    <div className="text-center">
      <div
        className={`animate-spin rounded-full border-b-2 border-green-400 ${sizeClasses[size]} mx-auto mb-4`}
      ></div>
      {message && <p className="text-gray-400">{message}</p>}
    </div>
  );

  if (fullScreen) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-black">
        {spinner}
      </div>
    );
  }

  return spinner;
};

export default LoadingSpinner;


================================================
FILE: src/components/ui/Modal.tsx
================================================
import React from 'react';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: React.ReactNode;
  icon?: React.ReactNode;
}

const Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children, icon }) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center px-4" onClick={onClose}>
      <div className="bg-neutral-900 rounded-2xl p-8 max-w-md w-full" onClick={(e) => e.stopPropagation()}>
        <div className="text-center mb-6">
          {icon && <div className="mb-4">{icon}</div>}
          <h2 className="text-2xl font-bold text-white mb-2">{title}</h2>
        </div>
        {children}
      </div>
    </div>
  );
};

export default Modal;


================================================
FILE: src/components/ui/NotificationBanner.tsx
================================================
import React from 'react';

interface NotificationBannerProps {
  type: 'success' | 'error' | 'warning' | 'info';
  title?: string;
  message: string;
  onDismiss?: () => void;
  action?: {
    label: string;
    onClick: () => void;
  };
}

const NotificationBanner: React.FC<NotificationBannerProps> = ({
  type,
  title,
  message,
  onDismiss,
  action,
}) => {
  const colors = {
    success: {
      bg: 'bg-green-500/10',
      border: 'border-green-500/20',
      text: 'text-green-400',
      iconBg: 'bg-green-500/20',
    },
    error: {
      bg: 'bg-red-500/10',
      border: 'border-red-500/20',
      text: 'text-red-400',
      iconBg: 'bg-red-500/20',
    },
    warning: {
      bg: 'bg-yellow-500/10',
      border: 'border-yellow-500/20',
      text: 'text-yellow-400',
      iconBg: 'bg-yellow-500/20',
    },
    info: {
      bg: 'bg-blue-500/10',
      border: 'border-blue-500/20',
      text: 'text-blue-400',
      iconBg: 'bg-blue-500/20',
    },
  };

  const icons = {
    success: (
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth={2}
        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    ),
    error: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />,
    warning: (
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth={2}
        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
      />
    ),
    info: (
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth={2}
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    ),
  };

  const style = colors[type];

  return (
    <div className={`${style.bg} border ${style.border} rounded-lg p-6`}>
      <div className="flex items-start">
        <div className="flex-shrink-0">
          <svg className={`w-6 h-6 ${style.text}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
            {icons[type]}
          </svg>
        </div>
        <div className="ml-3 flex-1">
          {title && <h3 className={`text-sm font-medium ${style.text}`}>{title}</h3>}
          <p className={`${title ? 'mt-2' : ''} text-sm ${style.text}`}>{message}</p>
          {action && (
            <div className="mt-3">
              <button
                onClick={action.onClick}
                className={`text-sm ${style.text} hover:opacity-80 underline font-medium`}
              >
                {action.label}
              </button>
            </div>
          )}
        </div>
        {onDismiss && (
          <button onClick={onDismiss} className={`ml-3 ${style.text} hover:opacity-80`}>
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        )}
      </div>
    </div>
  );
};

export default NotificationBanner;


================================================
FILE: src/components/ui/PasswordInput.tsx
================================================
import React, { useState } from 'react';
import Input from './Input';

interface PasswordInputProps
  extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'type'> {
  label?: string;
  error?: string;
}

const PasswordInput = React.forwardRef<HTMLInputElement, PasswordInputProps>(
  ({ label, error, className = '', ...props }, ref) => {
    const [showPassword, setShowPassword] = useState(false);

    return (
      <div className="relative">
        <Input
          ref={ref}
          type={showPassword ? 'text' : 'password'}
          label={label}
          error={error}
          className={className}
          {...props}
        />

        {/* Toggle Button - properly aligned inside the input field */}
        <button
          type="button"
          onClick={() => setShowPassword((prev) => !prev)}
          className="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 focus:outline-none transition"
          tabIndex={-1}
          aria-label={showPassword ? 'Hide password' : 'Show password'}
        >
          {showPassword ? (
            // Eye Slash - Hidden
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={2}
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"
              />
            </svg>
          ) : (
            // Eye - Visible
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={2}
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
              />
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={2}
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
              />
            </svg>
          )}
        </button>
      </div>
    );
  }
);

PasswordInput.displayName = 'PasswordInput';

export default PasswordInput;


================================================
FILE: src/constants/api.constants.ts
================================================
export const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/api';

export const API_ENDPOINTS = {
  AUTH: {
    REGISTER: '/auth/register',
    LOGIN: '/auth/login',
    ME: '/auth/me',
    FORGOT_PASSWORD: '/auth/forgot-password',
    RESET_PASSWORD: '/auth/reset-password',
    VERIFY_EMAIL: '/auth/verify-email',
    RESEND_VERIFICATION: '/auth/resend-verification',
    DEACTIVATE_ACCOUNT: '/auth/deactivate-account',
    CANCEL_DEACTIVATION: '/auth/cancel-deactivation',
  },
  PROFILE: {
    GET: '/profile',
    UPDATE_USERNAME: '/profile/username',
    UPDATE_PHOTO: '/profile/photo',
    REMOVE_PHOTO: '/profile/photo',
    REQUEST_VERIFICATION: '/profile/request-verification',
  },
  OAUTH: {
    GOOGLE: import.meta.env.VITE_OAUTH_GOOGLE_URL || 'http://localhost:8080/oauth2/authorization/google',
  },
};

export const STORAGE_KEYS = {
  TOKEN: 'token',
};


// Music API Endpoints
export const MUSIC_API_BASE_URL = import.meta.env.VITE_MUSIC_API_BASE_URL || 'http://localhost:3000/api';

export const MUSIC_ENDPOINTS = {
  SONGS: {
    LIST: '/song/list',
    ADD: '/song/add',
    REMOVE: '/song/remove',
  },
  ALBUMS: {
    LIST: '/album/list',
    ADD: '/album/add',
    REMOVE: '/album/remove',
  },
};



================================================
FILE: src/constants/ui.constants.ts
================================================
export const UI_MESSAGES = {
  ERRORS: {
    GENERIC: 'An unexpected error occurred. Please try again.',
    LOGIN_FAILED: 'Login failed. Please try again.',
    REGISTRATION_FAILED: 'Registration failed. Please try again.',
    PROFILE_LOAD_FAILED: 'Failed to load profile',
    PROFILE_UPDATE_FAILED: 'Failed to update profile',
    USERNAME_UPDATE_FAILED: 'Failed to update username',
    PHOTO_UPDATE_FAILED: 'Failed to update profile photo',
    PHOTO_REMOVE_FAILED: 'Failed to remove profile photo',
    VERIFICATION_FAILED: 'Failed to send verification email',
    RESET_EMAIL_FAILED: 'Failed to send reset email',
    PASSWORD_RESET_FAILED: 'Failed to reset password',
    DEACTIVATION_FAILED: 'Failed to deactivate account',
    PASSWORDS_DONT_MATCH: 'Passwords do not match',
    INVALID_RESET_TOKEN: 'Invalid reset token',
    INVALID_URL: 'Please enter a valid URL',
    INVALID_PHOTO_URL: 'Please enter a valid photo URL',
    USERNAME_LENGTH: 'Username must be between 3 and 20 characters',
  },
  SUCCESS: {
    EMAIL_SENT: 'Email sent!',
    VERIFICATION_SENT: 'Verification email sent! Check your inbox.',
    USERNAME_UPDATED: 'Username updated successfully',
    PHOTO_UPDATED: 'Profile photo updated successfully',
    PHOTO_REMOVED: 'Profile photo removed',
    PASSWORD_RESET: 'Password reset successfully',
    EMAIL_VERIFIED: 'Email Verified!',
  },
  LOADING: {
    SIGNING_IN: 'Signing in...',
    CREATING_ACCOUNT: 'Creating account...',
    SENDING: 'Sending...',
    PROCESSING: 'Processing...',
    SAVING: 'Saving...',
    REMOVING: 'Removing...',
    RESETTING: 'Resetting...',
    LOADING: 'Loading...',
    LOADING_PROFILE: 'Loading profile...',
    COMPLETING_SIGNIN: 'Completing sign in...',
    VERIFYING: 'Verifying your email...',
  },
  TITLES: {
    WELCOME_BACK: 'Welcome back',
    SIGN_UP_FREE: 'Sign up for free',
    RESET_PASSWORD: 'Reset your password',
    CHOOSE_NEW_PASSWORD: 'Choose new password',
    EMAIL_VERIFICATION: 'Email Verification',
    RESEND_VERIFICATION: 'Resend Verification',
    PROFILE_SETTINGS: 'Profile Settings',
    INVALID_LINK: 'Invalid Link',
    VERIFICATION_FAILED: 'Verification Failed',
    DEACTIVATE_ACCOUNT: 'Deactivate Account?',
  },
  BUTTONS: {
    SIGN_IN: 'Sign in',
    SIGN_UP: 'Sign up',
    SEND_RESET_LINK: 'Send reset link',
    RESET_PASSWORD: 'Reset password',
    RESEND_VERIFICATION: 'Resend verification email',
    CONTINUE_GOOGLE: 'Continue with Google',
    VERIFY_NOW: 'Verify now',
    CHANGE_PHOTO: 'Change photo',
    REMOVE: 'Remove',
    EDIT: 'Edit',
    SAVE: 'Save',
    CANCEL: 'Cancel',
    LOG_OUT: 'Log out',
    DEACTIVATE: 'Deactivate',
    GO_HOME: 'Go to Home',
    BACK_TO_LOGIN: 'Back to login',
    REQUEST_NEW_LINK: 'Request new verification link',
  },
  PLACEHOLDERS: {
    EMAIL: 'Email address',
    EMAIL_OR_USERNAME: 'Email or username',
    USERNAME: 'Username',
    PASSWORD: 'Password',
    PASSWORD_MIN_6: 'Password (at least 6 characters)',
    NEW_PASSWORD: 'New password',
    CONFIRM_PASSWORD: 'Confirm password',
    IMAGE_URL: 'Enter image URL (e.g., https://example.com/photo.jpg)',
  },
  DESCRIPTIONS: {
    SIGN_IN_SUBTITLE: 'Sign in to continue to Music App',
    SIGN_UP_SUBTITLE: 'Create your account to get started',
    RESET_SUBTITLE: 'Enter your email to receive a reset link',
    NEW_PASSWORD_SUBTITLE: 'Make it strong and memorable',
    RESEND_SUBTITLE: 'Enter your email to receive a new verification link',
    USERNAME_HINT: 'Username must be between 3 and 20 characters',
    PHOTO_HINT: 'Enter a direct link to an image (must be publicly accessible)',
    USERNAME_DISPLAY: 'This is how others will see you',
  },
  NOTIFICATIONS: {
    EMAIL_VERIFIED_24H: 'Check your inbox for a verification link. It will expire in 24 hours.',
    PASSWORD_RESET_1H: 'Check your inbox for a password reset link. It will expire in 1 hour.',
    DEACTIVATION_WARNING: 'Your account will be scheduled for permanent deactivation in 7 days. You can cancel this by logging in within that period.',
    EMAIL_VERIFIED_SUCCESS: 'Your email has been successfully verified. Redirecting to login...',
    INVALID_RESET_LINK: 'This password reset link is invalid or has expired.',
    VERIFY_EMAIL_PROMPT: 'Please check your inbox and verify your email address to access all features.',
  },
};

export const QUERY_KEYS = {
  PROFILE: 'profile',
  CURRENT_USER: 'currentUser',
};

export const ROUTE_PARAMS = {
  TOKEN: 'token',
  ERROR: 'error',
  SUCCESS: 'success',
  VERIFICATION: 'verification',
  VERIFICATION_PENDING: 'pending',
};


================================================
FILE: src/context/AuthContext.tsx
================================================
import { createContext, useContext, useState, useEffect } from "react";
import type { User, AuthResponse } from "../types/auth.types";
import type { ReactNode } from "react";
import { authApi } from "../services/api";
import { STORAGE_KEYS } from "../constants/api.constants";

interface AuthContextType {
  user: User | null;
  token: string | null;
  login: (data: AuthResponse) => void;
  logout: () => void;
  isAuthenticated: boolean;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: ReactNode }) => {
  const [user, setUser] = useState<User | null>(null);
  const [token, setToken] = useState<string | null>(
    localStorage.getItem(STORAGE_KEYS.TOKEN)
  );
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const initAuth = async () => {
      const savedToken = localStorage.getItem(STORAGE_KEYS.TOKEN);
      if (savedToken) {
        try {
          const userData = await authApi.getCurrentUser();
          setUser({
            userId: userData.userId,
            email: userData.email,
            username: userData.username,
            profileImageUrl: userData.profileImageUrl,
          });
        } catch (error) {
          localStorage.removeItem(STORAGE_KEYS.TOKEN);
          setToken(null);
        }
      }
      setIsLoading(false);
    };

    initAuth();
  }, []);

  const login = (data: AuthResponse) => {
    localStorage.setItem(STORAGE_KEYS.TOKEN, data.token);
    setToken(data.token);
    setUser({
      userId: data.userId,
      email: data.email,
      username: data.username,
      profileImageUrl: data.profileImageUrl,
    });
  };

  const logout = () => {
    localStorage.removeItem(STORAGE_KEYS.TOKEN);
    setToken(null);
    setUser(null);
  };

  return (
    <AuthContext.Provider
      value={{
        user,
        token,
        login,
        logout,
        isAuthenticated: !!user,
        isLoading,
      }}
    >
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error("useAuth must be used within an AuthProvider");
  }
  return context;
};


================================================
FILE: src/context/MusicContext.tsx
================================================
// src/context/MusicContext.tsx

import {
  createContext,
  useContext,
  useState,
  useEffect,
  useRef,
  useMemo,
  type ReactNode,
} from "react";
import { musicApi } from "../services/musicApi";

interface Song {
  _id: string;
  name: string;
  desc: string;
  album: string;
  image: string;
  file: string;
  duration: string;
}

interface Album {
  _id: string;
  name: string;
  desc: string;
  image: string;
  bgColour: string;
}

interface MusicContextType {
  audioRef: React.RefObject<HTMLAudioElement>;
  seekBar: React.RefObject<HTMLDivElement>;
  seekBg: React.RefObject<HTMLDivElement>;

  songs: Song[];
  albums: Album[];
  songsData: Song[];
  albumsData: Album[];

  filteredSongsData: Song[];
  filteredAlbumsData: Album[];

  searchQuery: string;
  setSearchQuery: (query: string) => void;
  viewFilter: "all" | "music";
  setViewFilter: (filter: "all" | "music") => void;

  track: Song | null;
  setTrack: (song: Song) => void;
  playStatus: boolean;
  setPlayStatus: (status: boolean) => void;

  time: {
    currentTime: { minute: number; second: number };
    totalTime: { minute: number; second: number };
  };

  play: () => void;
  pause: () => void;
  playWithId: (id: string) => void;
  previousSong: () => void;
  nextSong: () => void;
  seekSong: (e: React.MouseEvent<HTMLDivElement>) => void;

  isLooping: boolean;
  toggleLoop: () => void;
  isShuffle: boolean;
  toggleShuffle: () => void;

  volume: number;
  handleVolumeChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
  isMuted: boolean;
  toggleMute: () => void;

  isLoading: boolean;
}

const MusicContext = createContext<MusicContextType | undefined>(undefined);

export const MusicProvider = ({ children }: { children: ReactNode }) => {
  const audioRef = useRef<HTMLAudioElement>(null);
  const seekBar = useRef<HTMLDivElement>(null);
  const seekBg = useRef<HTMLDivElement>(null);

  const [songs, setSongs] = useState<Song[]>([]);
  const [albums, setAlbums] = useState<Album[]>([]);
  const [originalSongs, setOriginalSongs] = useState<Song[]>([]);

  const [track, setTrack] = useState<Song | null>(null);
  const [playStatus, setPlayStatus] = useState(false);
  const [isLoading, setIsLoading] = useState(true);

  const [isLooping, setIsLooping] = useState(false);
  const [isShuffle, setIsShuffle] = useState(false);
  const [volume, setVolume] = useState(0.5);
  const [isMuted, setIsMuted] = useState(false);

  const [time, setTime] = useState({
    currentTime: { second: 0, minute: 0 },
    totalTime: { second: 0, minute: 0 },
  });

  const [searchQuery, setSearchQuery] = useState("");
  const [viewFilter, setViewFilter] = useState<"all" | "music">("all");

  // Load music data
  useEffect(() => {
    const loadMusic = async () => {
      try {
        const [songsData, albumsData] = await Promise.all([
          musicApi.getSongs(),
          musicApi.getAlbums(),
        ]);
        setSongs(songsData);
        setAlbums(albumsData);
        setOriginalSongs(songsData);
        if (songsData.length > 0) setTrack(songsData[0]);
      } catch (error) {
        console.error("Failed to load music:", error);
      } finally {
        setIsLoading(false);
      }
    };
    loadMusic();
  }, []);

  // Time update
  useEffect(() => {
    const audio = audioRef.current;
    if (!audio) return;

    const updateTime = () => {
      setTime({
        currentTime: {
          second: Math.floor(audio.currentTime % 60),
          minute: Math.floor(audio.currentTime / 60),
        },
        totalTime: {
          second: Math.floor((audio.duration || 0) % 60),
          minute: Math.floor((audio.duration || 0) / 60),
        },
      });
    };

    audio.addEventListener("timeupdate", updateTime);
    audio.addEventListener("loadedmetadata", updateTime);
    if (audio.readyState > 0) updateTime();

    return () => {
      audio.removeEventListener("timeupdate", updateTime);
      audio.removeEventListener("loadedmetadata", updateTime);
    };
  }, [track?.file]);

  // Loop
  useEffect(() => {
    if (audioRef.current) audioRef.current.loop = isLooping;
  }, [isLooping]);

  // Shuffle
  useEffect(() => {
    if (isShuffle) {
      setSongs([...songs].sort(() => Math.random() - 0.5));
    } else {
      setSongs(originalSongs);
    }
  }, [isShuffle, originalSongs]);

  // Filtered data
  const filteredSongsData = useMemo(() => {
    if (!searchQuery.trim()) return songs;
    const q = searchQuery.toLowerCase();
    return songs.filter(
      (s) =>
        s.name.toLowerCase().includes(q) || s.desc.toLowerCase().includes(q)
    );
  }, [songs, searchQuery]);

  const filteredAlbumsData = useMemo(() => {
    if (!searchQuery.trim()) return albums;
    const q = searchQuery.toLowerCase();
    return albums.filter((a) => a.name.toLowerCase().includes(q));
  }, [albums, searchQuery]);

  // Player controls
  const play = () => {
    audioRef.current?.play();
    setPlayStatus(true);
  };

  const pause = () => {
    audioRef.current?.pause();
    setPlayStatus(false);
  };

  const playWithId = async (id: string) => {
    const song = songs.find((s) => s._id === id);
    if (song) {
      setTrack(song);
      await audioRef.current?.play();
      setPlayStatus(true);
    }
  };

  const previousSong = () => {
    if (!track) return;
    const currentIndex = songs.findIndex((s) => s._id === track._id);
    const prevIndex = currentIndex > 0 ? currentIndex - 1 : songs.length - 1;
    playWithId(songs[prevIndex]._id);
  };

  const nextSong = () => {
    if (!track) return;
    const currentIndex = songs.findIndex((s) => s._id === track._id);
    const nextIndex = currentIndex < songs.length - 1 ? currentIndex + 1 : 0;
    playWithId(songs[nextIndex]._id);
  };

  const seekSong = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!audioRef.current || !seekBg.current) return;
    const rect = seekBg.current.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    const percentage = clickX / rect.width;
    audioRef.current.currentTime = percentage * audioRef.current.duration;
  };

  const toggleLoop = () => setIsLooping(!isLooping);

  const toggleShuffle = () => setIsShuffle(!isShuffle);

  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const vol = parseFloat(e.target.value);
    setVolume(vol);
    setIsMuted(false);
    if (audioRef.current) audioRef.current.volume = vol;
  };

  const toggleMute = () => {
    const newMutedState = !isMuted;
    setIsMuted(newMutedState);
    if (audioRef.current) {
      audioRef.current.volume = newMutedState ? 0 : volume;
    }
  };

  return (
    <MusicContext.Provider
      value={{
        audioRef,
        seekBar,
        seekBg,
        songs,
        albums,
        songsData: filteredSongsData,
        albumsData: filteredAlbumsData,
        filteredSongsData,
        filteredAlbumsData,
        searchQuery,
        setSearchQuery,
        viewFilter,
        setViewFilter,
        track,
        setTrack,
        playStatus,
        setPlayStatus,
        time,
        play,
        pause,
        playWithId,
        previousSong,
        nextSong,
        seekSong,
        isLooping,
        toggleLoop,
        isShuffle,
        toggleShuffle,
        volume,
        handleVolumeChange,
        isMuted,
        toggleMute,
        isLoading,
      }}
    >
      {children}
    </MusicContext.Provider>
  );
};

export const useMusic = () => {
  const context = useContext(MusicContext);
  if (!context) throw new Error("useMusic must be used within MusicProvider");
  return context;
};



================================================
FILE: src/hooks/useForm.ts
================================================
import { useState, type ChangeEvent, type FormEvent } from 'react';

interface UseFormOptions<T> {
  initialValues: T;
  onSubmit: (values: T) => void | Promise<void>;
  validate?: (values: T) => Partial<Record<keyof T, string>>;
}

export function useForm<T extends Record<string, any>>({
  initialValues,
  onSubmit,
  validate,
}: UseFormOptions<T>) {
  const [values, setValues] = useState<T>(initialValues);
  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({});
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setValues((prev) => ({ ...prev, [name]: value }));
    // Clear error for this field when user types
    if (errors[name as keyof T]) {
      setErrors((prev) => ({ ...prev, [name]: undefined }));
    }
  };

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    
    // Run validation if provided
    if (validate) {
      const validationErrors = validate(values);
      if (Object.keys(validationErrors).length > 0) {
        setErrors(validationErrors);
        return;
      }
    }

    setIsSubmitting(true);
    try {
      await onSubmit(values);
    } finally {
      setIsSubmitting(false);
    }
  };

  const resetForm = () => {
    setValues(initialValues);
    setErrors({});
    setIsSubmitting(false);
  };

  const setFieldValue = (name: keyof T, value: any) => {
    setValues((prev) => ({ ...prev, [name]: value }));
  };

  const setFieldError = (name: keyof T, error: string) => {
    setErrors((prev) => ({ ...prev, [name]: error }));
  };

  return {
    values,
    errors,
    isSubmitting,
    handleChange,
    handleSubmit,
    resetForm,
    setFieldValue,
    setFieldError,
  };
}


================================================
FILE: src/hooks/useNotification.ts
================================================
import { useState, useEffect } from 'react';

interface UseNotificationReturn {
  error: string;
  success: string;
  setError: (message: string) => void;
  setSuccess: (message: string) => void;
  clearNotifications: () => void;
}

export const useNotification = (autoDismissMs: number = 5000): UseNotificationReturn => {
  const [error, setError] = useState('');
  const [success, setSuccess] = useState('');

  useEffect(() => {
    if (error || success) {
      const timer = setTimeout(() => {
        setError('');
        setSuccess('');
      }, autoDismissMs);
      return () => clearTimeout(timer);
    }
  }, [error, success, autoDismissMs]);

  const clearNotifications = () => {
    setError('');
    setSuccess('');
  };

  return {
    error,
    success,
    setError,
    setSuccess,
    clearNotifications,
  };
};


================================================
FILE: src/pages/ForgotPasswordPage.tsx
================================================
import { useState } from 'react';
import { Link } from 'react-router-dom';
import { useMutation } from '@tanstack/react-query';
import { authApi } from '../services/api';
import { useForm } from '../hooks/useForm';
import { validate } from '../utils/validation';
import { UI_MESSAGES } from '../constants/ui.constants';
import AuthPageLayout from '../components/layout/AuthPageLayout';
import Input from '../components/ui/Input';
import Button from '../components/ui/Button';
import NotificationBanner from '../components/ui/NotificationBanner';

export default function ForgotPasswordPage() {
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState('');

  const forgotPasswordMutation = useMutation({
    mutationFn: (email: string) => authApi.forgotPassword(email), 
    onSuccess: () => {
      setSuccess(true);
      setError('');
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.RESET_EMAIL_FAILED);
      setSuccess(false);
    },
  });

  const { values, errors, handleChange, handleSubmit, isSubmitting } = useForm<{ email: string }>({
    initialValues: { email: '' },
    validate: (values) => {
      const emailError = validate.email(values.email);
      return emailError ? { email: emailError } : {};
    },
    onSubmit: (data) => {
      setError('');
      setSuccess(false);
      forgotPasswordMutation.mutate(data.email); // √¢≈ì‚Äú Now passes correctly to wrapper
    },
  });

  return (
    <AuthPageLayout
      title={UI_MESSAGES.TITLES.RESET_PASSWORD}
      subtitle={UI_MESSAGES.DESCRIPTIONS.RESET_SUBTITLE}
    >
      {success ? (
        <NotificationBanner
          type="success"
          title={UI_MESSAGES.SUCCESS.EMAIL_SENT}
          message={UI_MESSAGES.NOTIFICATIONS.PASSWORD_RESET_1H}
        />
      ) : (
        <form onSubmit={handleSubmit} className="space-y-6">
          {error && <NotificationBanner type="error" message={error} />}

          <Input
            name="email"
            type="email"
            value={values.email}
            onChange={handleChange}
            placeholder={UI_MESSAGES.PLACEHOLDERS.EMAIL}
            error={errors.email}
            required
          />

          <Button type="submit" variant="primary" fullWidth isLoading={isSubmitting}>
            {UI_MESSAGES.BUTTONS.SEND_RESET_LINK}
          </Button>
        </form>
      )}

      <div className="mt-8 text-center">
        <Link to="/login" className="text-gray-400 hover:text-white text-sm transition">
          {UI_MESSAGES.BUTTONS.BACK_TO_LOGIN}
        </Link>
      </div>
    </AuthPageLayout>
  );
}


================================================
FILE: src/pages/HomePage.tsx
================================================
import { useState, useEffect } from "react";
import { useAuth } from "../context/AuthContext";
import { useMutation } from "@tanstack/react-query";
import { authApi } from "../services/api";
import { useSearchParams, Link } from "react-router-dom";
import MusicBrowsePage from "./MusicBrowsePage";

export default function HomePage() {
  const { user, logout } = useAuth();
  const [searchParams] = useSearchParams();
  const showVerificationPending =
    searchParams.get("verification") === "pending";

  const [showSettings, setShowSettings] = useState(false);
  const [showDeactivateModal, setShowDeactivateModal] = useState(false);
  const [error, setError] = useState("");
  const [success, setSuccess] = useState("");
  const [showVerificationBanner, setShowVerificationBanner] = useState(false);

  useEffect(() => {
    if (showVerificationPending) {
      setShowVerificationBanner(true);
    }
  }, [showVerificationPending]);
  const deactivateMutation = useMutation({
    mutationFn: authApi.deactivateAccount,
    onSuccess: (data) => {
      setSuccess(data.message);
      setShowDeactivateModal(false);
      setTimeout(() => {
        logout();
      }, 3000);
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || "Failed to deactivate account");
    },
  });

  const handleDeactivate = () => {
    setError("");
    setSuccess("");
    deactivateMutation.mutate();
  };

  return (
    <div className="min-h-screen bg-black">
      {/* Header */}
      <nav className="bg-neutral-900 border-b border-neutral-800">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center space-x-3">
              <div className="w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center">
                <span className="text-xl">√∞≈∏≈Ω¬µ</span>
              </div>
              <h1 className="text-2xl font-bold text-white">Music App</h1>
              <Link
                to="/browse"
                onClick={() => setShowSettings(false)}
                className="w-full px-4 py-3 bg-neutral-800 hover:bg-neutral-700 text-white rounded-lg transition flex items-center space-x-3"
              >
                <svg
                  className="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  />
                </svg>
                <span>browse music</span>
              </Link>
            </div>
            <div className="flex items-center space-x-4">
              <div className="flex items-center space-x-3 bg-neutral-800 px-4 py-2 rounded-full">
                {user?.profileImageUrl ? (
                  <img
                    src={user.profileImageUrl}
                    alt="Profile"
                    className="w-8 h-8 rounded-full"
                  />
                ) : (
                  <div className="w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-bold">
                    {user?.username?.[0].toUpperCase()}
                  </div>
                )}
                <span className="text-white font-medium">{user?.username}</span>
              </div>
              <button
                onClick={() => setShowSettings(!showSettings)}
                className="p-2 text-gray-400 hover:text-white transition rounded-full hover:bg-neutral-800"
              >
                <svg
                  className="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  />
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </nav>

      {/* Settings Sidebar */}
      {showSettings && (
        <div
          className="fixed inset-0 bg-black/50 z-50"
          onClick={() => setShowSettings(false)}
        >
          <div
            className="absolute right-0 top-0 h-full w-80 bg-neutral-900 shadow-xl"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="p-6">
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-xl font-bold text-white">Settings</h2>
                <button
                  onClick={() => setShowSettings(false)}
                  className="text-gray-400 hover:text-white"
                >
                  <svg
                    className="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth={2}
                      d="M6 18L18 6M6 6l12 12"
                    />
                  </svg>
                </button>
              </div>

              <div className="space-y-4">
                <Link
                  to="/profile-settings"
                  onClick={() => setShowSettings(false)}
                  className="w-full px-4 py-3 bg-neutral-800 hover:bg-neutral-700 text-white rounded-lg transition flex items-center space-x-3"
                >
                  <svg
                    className="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth={2}
                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                    />
                  </svg>
                  <span>Profile Settings</span>
                </Link>

                <button
                  onClick={logout}
                  className="w-full px-4 py-3 bg-neutral-800 hover:bg-neutral-700 text-white rounded-lg transition flex items-center space-x-3"
                >
                  <svg
                    className="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth={2}
                      d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                    />
                  </svg>
                  <span>Log out</span>
                </button>

                <button
                  onClick={() => {
                    setShowSettings(false);
                    setShowDeactivateModal(true);
                  }}
                  className="w-full px-4 py-3 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg transition flex items-center space-x-3"
                >
                  <svg
                    className="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth={2}
                      d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                    />
                  </svg>
                  <span>Deactivate account</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Deactivate Modal */}
      {showDeactivateModal && (
        <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center px-4">
          <div className="bg-neutral-900 rounded-2xl p-8 max-w-md w-full">
            <div className="text-center mb-6">
              <div className="w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg
                  className="w-8 h-8 text-red-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
              </div>
              <h2 className="text-2xl font-bold text-white mb-2">
                Deactivate Account?
              </h2>
              <p className="text-gray-400">
                Your account will be scheduled for permanent deactivation in 7
                days. You can cancel this by logging in within that period.
              </p>
            </div>

            {error && (
              <div className="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-4 text-sm">
                {error}
              </div>
            )}

            <div className="flex space-x-3">
              <button
                onClick={() => setShowDeactivateModal(false)}
                className="flex-1 px-4 py-3 bg-neutral-800 hover:bg-neutral-700 text-white rounded-lg transition"
              >
                Cancel
              </button>
              <button
                onClick={handleDeactivate}
                disabled={deactivateMutation.isPending}
                className="flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition disabled:opacity-50"
              >
                {deactivateMutation.isPending ? "Processing..." : "Deactivate"}
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {/* Email Verification Banner */}
        {showVerificationBanner && (
          <div className="bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-6 mb-6">
            <div className="flex items-start">
              <div className="flex-shrink-0">
                <svg
                  className="w-6 h-6 text-yellow-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
              </div>
              <div className="ml-3 flex-1">
                <h3 className="text-sm font-medium text-yellow-400">
                  Verify your email
                </h3>
                <p className="mt-2 text-sm text-yellow-300">
                  Please check your inbox and verify your email address to
                  access all features.
                </p>
                <div className="mt-3">
                  <Link
                    to="/resend-verification"
                    className="text-sm text-yellow-400 hover:text-yellow-300 underline"
                  >
                    Resend verification email
                  </Link>
                </div>
              </div>
              <button
                onClick={() => setShowVerificationBanner(false)}
                className="ml-3 text-yellow-400 hover:text-yellow-300"
              >
                <svg
                  className="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>
          </div>
        )}

        {success && (
          <div className="bg-green-500/10 border border-green-500/20 text-green-400 px-6 py-4 rounded-lg mb-6">
            {success}
          </div>
        )}

        <div className="bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-2xl p-8 mb-8 border border-green-500/20">
          <h2 className="text-3xl font-bold text-white mb-4">
            Welcome back, {user?.username}! √∞≈∏≈Ω¬µ
          </h2>
          <p className="text-gray-300 text-lg">
            You're successfully authenticated and ready to explore.
          </p>
        </div>

        <div className="bg-neutral-900 rounded-2xl p-8 border border-neutral-800">
          <h3 className="text-xl font-bold text-white mb-6">Your Profile</h3>
          <div className="space-y-4">
            <div className="flex items-center space-x-4 p-4 bg-neutral-800 rounded-lg">
              <div className="w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-lg">
                {user?.username?.[0].toUpperCase()}
              </div>
              <div>
                <p className="text-sm text-gray-400">Username</p>
                <p className="text-white font-medium">{user?.username}</p>
              </div>
            </div>
            <div className="flex items-center space-x-4 p-4 bg-neutral-800 rounded-lg">
              <div className="w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center">
                <svg
                  className="w-6 h-6 text-blue-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
              </div>
              <div>
                <p className="text-sm text-gray-400">Email</p>
                <p className="text-white font-medium">{user?.email}</p>
              </div>
            </div>
            <div className="flex items-center space-x-4 p-4 bg-neutral-800 rounded-lg">
              <div className="w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center">
                <svg
                  className="w-6 h-6 text-green-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"
                  />
                </svg>
              </div>
              <div>
                <p className="text-sm text-gray-400">User ID</p>
                <p className="text-white font-medium font-mono text-sm">
                  {user?.userId}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}



================================================
FILE: src/pages/LoginPage.tsx
================================================
import { useState } from 'react';
import { useNavigate, Link, useSearchParams } from 'react-router-dom';
import { useMutation } from '@tanstack/react-query';
import { authApi } from '../services/api';
import { useAuth } from '../context/AuthContext';
import { useForm } from '../hooks/useForm';
import { UI_MESSAGES } from '../constants/ui.constants';
import type { LoginRequest } from '../types/auth.types';
import AuthPageLayout from '../components/layout/AuthPageLayout';
import Input from '../components/ui/Input';
import PasswordInput from '../components/ui/PasswordInput';
import Button from '../components/ui/Button';
import GoogleOAuthButton from '../components/ui/GoogleOAuthButton';
import NotificationBanner from '../components/ui/NotificationBanner';

export default function LoginPage() {
  const [searchParams] = useSearchParams();
  const urlError = searchParams.get('error');
  const urlSuccess = searchParams.get('success');

  const [error, setError] = useState<string | React.ReactNode>(urlError || '');

  const navigate = useNavigate();
  const { login } = useAuth();

  const loginMutation = useMutation({
    mutationFn: authApi.login,
    onSuccess: (data) => {
      login(data);
      navigate('/');
    },
    onError: (error: any) => {
      const errorMessage = error.response?.data?.message || UI_MESSAGES.ERRORS.LOGIN_FAILED;

      if (errorMessage.includes('verify your email')) {
        setError(
          <div>
            <p>{errorMessage}</p>
            <Link to="/resend-verification" className="block mt-2 text-green-400 hover:text-green-300 underline">
              {UI_MESSAGES.BUTTONS.RESEND_VERIFICATION}
            </Link>
          </div>
        );
      } else {
        setError(errorMessage);
      }
    },
  });

  const { values, handleChange, handleSubmit, isSubmitting } = useForm<LoginRequest>({
    initialValues: {
      emailOrUsername: '',
      password: '',
    },
    onSubmit: (data) => {
      setError('');
      loginMutation.mutate(data);
    },
  });

  return (
    <AuthPageLayout title={UI_MESSAGES.TITLES.WELCOME_BACK} subtitle={UI_MESSAGES.DESCRIPTIONS.SIGN_IN_SUBTITLE}>
      {urlSuccess && <NotificationBanner type="success" message={urlSuccess}  />}

      <form onSubmit={handleSubmit} className="space-y-5">
        {error && (
          <div className="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm">
            {error}
          </div>
        )}

        <Input
          name="emailOrUsername"
          value={values.emailOrUsername}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.EMAIL_OR_USERNAME}
          required
        />

        <PasswordInput
          name="password"
          value={values.password}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.PASSWORD}
          required
        />

        <div className="flex items-center justify-end">
          <Link to="/forgot-password" className="text-sm text-gray-400 hover:text-green-400 transition">
            Forgot password?
          </Link>
        </div>

        <Button type="submit" variant="primary" fullWidth isLoading={isSubmitting}>
          {UI_MESSAGES.BUTTONS.SIGN_IN}
        </Button>
      </form>

      <div className="my-8 flex items-center">
        <div className="flex-1 border-t border-neutral-800"></div>
        <span className="px-4 text-gray-500 text-sm">OR</span>
        <div className="flex-1 border-t border-neutral-800"></div>
      </div>

      <GoogleOAuthButton />

      <div className="mt-8 text-center">
        <p className="text-gray-400">
          Don't have an account?{' '}
          <Link to="/register" className="text-green-400 hover:text-green-300 font-semibold transition">
            {UI_MESSAGES.BUTTONS.SIGN_UP}
          </Link>
        </p>
      </div>
    </AuthPageLayout>
  );
}


================================================
FILE: src/pages/MusicApp.tsx
================================================
import Display from "../components/music/Display";
import Player from "../components/music/Player";
import Sidebar from "../components/music/Sidebar";
import { useMusic } from "../context/MusicContext";

export default function MusicApp() {
  const { audioRef, track, songsData } = useMusic();

  return (
    <div className="h-screen bg-black">
      {songsData.length !== 0 ? (
        <>
          <div className="h-[90%] flex">
            <Sidebar />
            <Display />
          </div>
          <Player />
        </>
      ) : null}
      <audio ref={audioRef} src={track?.file || ""} preload="auto"></audio>
    </div>
  );
}



================================================
FILE: src/pages/MusicBrowsePage.tsx
================================================
import { useMusic } from '../context/MusicContext';
import LoadingSpinner from '../components/ui/LoadingSpinner';

export default function MusicBrowsePage() {
  const { songs, albums, isLoading, playTrack } = useMusic();

  if (isLoading) return <LoadingSpinner fullScreen message="Loading music..." />;

  return (
    <div className="min-h-screen bg-black p-6">
      <div className="max-w-7xl mx-auto pb-32">
        {/* Albums Section */}
        <div className="mb-12">
          <h2 className="text-3xl font-bold text-white mb-6">Albums</h2>
          <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
            {albums.map((album) => (
              <div key={album._id} className="bg-neutral-900 p-4 rounded-lg hover:bg-neutral-800 transition">
                <img src={album.image} alt={album.name} className="w-full aspect-square rounded mb-3" />
                <p className="text-white font-medium truncate">{album.name}</p>
                <p className="text-gray-400 text-sm truncate">{album.desc}</p>
              </div>
            ))}
          </div>
        </div>

        {/* Songs Section */}
        <div>
          <h2 className="text-3xl font-bold text-white mb-6">Songs</h2>
          <div className="space-y-2">
            {songs.map((song) => (
              <div
                key={song._id}
                onClick={() => playTrack(song)}
                className="bg-neutral-900 p-4 rounded-lg hover:bg-neutral-800 transition cursor-pointer flex items-center space-x-4"
              >
                <img src={song.image} alt={song.name} className="w-12 h-12 rounded" />
                <div className="flex-1">
                  <p className="text-white font-medium">{song.name}</p>
                  <p className="text-gray-400 text-sm">{song.album}</p>
                </div>
                <span className="text-gray-400">{song.duration}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: src/pages/OAuthCallbackPage.tsx
================================================
import { useEffect, useRef } from "react";
import { useNavigate, useSearchParams } from "react-router-dom";
import { useAuth } from "../context/AuthContext";
import type { AuthResponse } from "../types/auth.types";

export default function OAuthCallbackPage() {
  const [searchParams] = useSearchParams();
  const navigate = useNavigate();
  const { login } = useAuth();
  const hasRun = useRef(false); // guard flag

  useEffect(() => {
    if (hasRun.current) return;
    hasRun.current = true;

    const token = searchParams.get("token");
    const userId = searchParams.get("userId");
    const email = searchParams.get("email");
    const username = searchParams.get("username");
    const profileImageUrl = searchParams.get("profileImageUrl");
    const error = searchParams.get("error");

    if (error) {
      console.error("OAuth error:", error);
      navigate("/login?error=" + encodeURIComponent(error), { replace: true });
      return;
    }

    if (token && userId && email && username) {
      const authData: AuthResponse = {
        token,
        userId,
        email,
        username,
        profileImageUrl: profileImageUrl || undefined,
      };

      login(authData);
      navigate("/", { replace: true });
    } else {
      navigate("/login?error=Authentication failed", { replace: true });
    }
  }, [searchParams, login, navigate]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-500">
      <div className="bg-white rounded-2xl shadow-2xl p-8">
        <div className="flex flex-col items-center">
          <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mb-4"></div>
          <h2 className="text-2xl font-bold text-gray-800 mb-2">
            Completing sign in...
          </h2>
          <p className="text-gray-600">Please wait while we redirect you.</p>
        </div>
      </div>
    </div>
  );
}



================================================
FILE: src/pages/ProfileSettingsPage.tsx
================================================
import { useState, useEffect } from "react";
import { Link, useNavigate } from "react-router-dom";
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { profileApi } from "../services/api";
import { useAuth } from "../context/AuthContext";
import { useNotification } from "../hooks/useNotification";
import { UI_MESSAGES, QUERY_KEYS } from "../constants/ui.constants";
import NotificationBanner from "../components/ui/NotificationBanner";
import LoadingSpinner from "../components/ui/LoadingSpinner";
import Input from "../components/ui/Input";
import Button from "../components/ui/Button";
import AppLogo from "../components/layout/AppLogo";

export default function ProfileSettingsPage() {
  const { logout } = useAuth();
  const navigate = useNavigate();
  const queryClient = useQueryClient();
  const { error, success, setError, setSuccess } = useNotification();

  // Editing states
  const [editingUsername, setEditingUsername] = useState(false);
  const [newUsername, setNewUsername] = useState("");
  const [editingPhoto, setEditingPhoto] = useState(false);
  const [photoUrl, setPhotoUrl] = useState("");

  const {
    data: profile,
    isLoading,
    error: profileError,
  } = useQuery({
    queryKey: [QUERY_KEYS.PROFILE],
    queryFn: profileApi.getProfile,
    retry: 1,
  });

  // Sync form fields when profile loads
  useEffect(() => {
    if (profile) {
      setNewUsername(profile.username || "");
      setPhotoUrl(profile.profileImageUrl || "");
    }
  }, [profile]);

  // Mutations
  const updateUsernameMutation = useMutation({
    mutationFn: profileApi.updateUsername,
    onSuccess: () => {
      setSuccess(UI_MESSAGES.SUCCESS.USERNAME_UPDATED);
      setEditingUsername(false);
      queryClient.invalidateQueries({ queryKey: [QUERY_KEYS.PROFILE] });
      queryClient.invalidateQueries({ queryKey: [QUERY_KEYS.CURRENT_USER] });
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.USERNAME_UPDATE_FAILED);
    },
  });

  const updatePhotoMutation = useMutation({
    mutationFn: profileApi.updateProfilePhoto,
    onSuccess: () => {
      setSuccess(UI_MESSAGES.SUCCESS.PHOTO_UPDATED);
      setEditingPhoto(false);
      queryClient.invalidateQueries({ queryKey: [QUERY_KEYS.PROFILE] });
      queryClient.invalidateQueries({ queryKey: [QUERY_KEYS.CURRENT_USER] });
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.PHOTO_UPDATE_FAILED);
    },
  });

  const removePhotoMutation = useMutation({
    mutationFn: profileApi.removeProfilePhoto,
    onSuccess: () => {
      setSuccess(UI_MESSAGES.SUCCESS.PHOTO_REMOVED);
      queryClient.invalidateQueries({ queryKey: [QUERY_KEYS.PROFILE] });
      queryClient.invalidateQueries({ queryKey: [QUERY_KEYS.CURRENT_USER] });
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.PHOTO_REMOVE_FAILED);
    },
  });

  const requestVerificationMutation = useMutation({
    mutationFn: profileApi.requestVerification,
    onSuccess: () => {
      setSuccess(UI_MESSAGES.SUCCESS.VERIFICATION_SENT);
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.VERIFICATION_FAILED);
    },
  });

  // Handlers
  const handleUpdateUsername = () => {
    const trimmed = newUsername.trim();
    if (trimmed.length < 3 || trimmed.length > 20) {
      setError(UI_MESSAGES.ERRORS.USERNAME_LENGTH);
      return;
    }
    updateUsernameMutation.mutate(trimmed);
  };

  const handleUpdatePhoto = () => {
    const trimmed = photoUrl.trim();
    if (!trimmed) {
      setError("Please enter a photo URL");
      return;
    }
    try {
      new URL(trimmed);
    } catch {
      setError(UI_MESSAGES.ERRORS.INVALID_PHOTO_URL);
      return;
    }
    updatePhotoMutation.mutate(trimmed);
  };

  const handleRemovePhoto = () => {
    removePhotoMutation.mutate();
  };

  const handleRequestVerification = () => {
    requestVerificationMutation.mutate();
  };

  const handleCancelUsername = () => {
    setNewUsername(profile?.username || "");
    setEditingUsername(false);
  };

  const handleCancelPhoto = () => {
    setPhotoUrl(profile?.profileImageUrl || "");
    setEditingPhoto(false);
  };

  if (isLoading) {
    return (
      <LoadingSpinner
        fullScreen
        message={UI_MESSAGES.LOADING.LOADING_PROFILE}
      />
    );
  }

  if (profileError) {
    return (
      <div className="min-h-screen bg-black flex items-center justify-center">
        <div className="text-center">
          <div className="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg className="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
          </div>
          <h2 className="text-2xl font-bold text-white mb-2">
            {UI_MESSAGES.ERRORS.PROFILE_LOAD_FAILED}
          </h2>
          <p className="text-gray-400 mb-6">Please try again later</p>
          <Button onClick={() => navigate("/")}>
            {UI_MESSAGES.BUTTONS.GO_HOME}
          </Button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-black">
      {/* Header */}
      <nav className="bg-neutral-900 border-b border-neutral-800">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <Link to="/" className="flex items-center space-x-3">
              <AppLogo size="sm" showText />
            </Link>
            <Link to="/" className="text-gray-400 hover:text-white transition">
              <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </Link>
          </div>
        </div>
      </nav>

      {/* Main Content */}
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {/* Notifications */}
        {success && (
          <NotificationBanner
            type="success"
            message={success}
            onDismiss={() => setSuccess("")}
          />
        )}
        {error && (
          <NotificationBanner
            type="error"
            message={error}
            onDismiss={() => setError("")}
          />
        )}

        {/* Email Verification Banner */}
        {!profile?.emailVerified && profile?.provider === "local" && (
          <div className="mb-6">
            <NotificationBanner
              type="warning"
              title="Email not verified"
              message="Verify your email to unlock all features and increase account security."
              action={{
                label: requestVerificationMutation.isPending ? "Sending..." : UI_MESSAGES.BUTTONS.VERIFY_NOW,
                onClick: handleRequestVerification,
              }}
            />
          </div>
        )}

        {/* Profile Photo Section */}
        <div className="bg-neutral-900 rounded-2xl p-6 mb-6 border border-neutral-800">
          <h2 className="text-xl font-bold text-white mb-6">Profile Photo</h2>

          <div className="flex items-start gap-8">
            <div className="flex-shrink-0">
              {profile?.profileImageUrl ? (
                <img
                  src={profile.profileImageUrl}
                  alt="Profile"
                  className="w-32 h-32 rounded-full object-cover border-4 border-neutral-800"
                />
              ) : (
                <div className="w-32 h-32 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white text-5xl font-bold">
                  {profile?.username?.[0]?.toUpperCase() || "U"}
                </div>
              )}
            </div>

            <div className="flex-1">
              {!editingPhoto ? (
                <div className="flex gap-3">
                  <Button variant="primary" onClick={() => setEditingPhoto(true)}>
                    {UI_MESSAGES.BUTTONS.CHANGE_PHOTO}
                  </Button>
                  {profile?.profileImageUrl && (
                    <Button
                      variant="danger"
                      onClick={handleRemovePhoto}
                      isLoading={removePhotoMutation.isPending}
                    >
                      {UI_MESSAGES.BUTTONS.REMOVE}
                    </Button>
                  )}
                </div>
              ) : (
                <div className="space-y-4">
                  <Input
                    type="url"
                    value={photoUrl}
                    onChange={(e) => setPhotoUrl(e.target.value)}
                    placeholder="https://example.com/your-photo.jpg"
                    label="Image URL"
                  />
                  <div className="flex gap-3">
                    <Button
                      variant="primary"
                      onClick={handleUpdatePhoto}
                      isLoading={updatePhotoMutation.isPending}
                    >
                      {UI_MESSAGES.BUTTONS.SAVE}
                    </Button>
                    <Button variant="secondary" onClick={handleCancelPhoto}>
                      {UI_MESSAGES.BUTTONS.CANCEL}
                    </Button>
                  </div>
                  <p className="text-xs text-gray-400">
                    Enter a direct link to a publicly accessible image
                  </p>
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Username Section */}
        <div className="bg-neutral-900 rounded-2xl p-6 mb-6 border border-neutral-800">
          <h2 className="text-xl font-bold text-white mb-6">Username</h2>

          {!editingUsername ? (
            <div className="flex items-center justify-between">
              <div>
                <p className="text-white text-2xl font-medium">{profile?.username}</p>
                <p className="text-gray-400 text-sm mt-1">
                  {UI_MESSAGES.DESCRIPTIONS.USERNAME_DISPLAY}
                </p>
              </div>
              <Button variant="primary" onClick={() => setEditingUsername(true)}>
                {UI_MESSAGES.BUTTONS.EDIT}
              </Button>
            </div>
          ) : (
            <div className="space-y-4">
              <Input
                value={newUsername}
                onChange={(e) => setNewUsername(e.target.value)}
                minLength={3}
                maxLength={20}
                placeholder={UI_MESSAGES.PLACEHOLDERS.USERNAME}
                autoFocus
              />
              <div className="flex gap-3">
                <Button
                  variant="primary"
                  onClick={handleUpdateUsername}
                  isLoading={updateUsernameMutation.isPending}
                >
                  {UI_MESSAGES.BUTTONS.SAVE}
                </Button>
                <Button variant="secondary" onClick={handleCancelUsername}>
                  {UI_MESSAGES.BUTTONS.CANCEL}
                </Button>
              </div>
              <p className="text-xs text-gray-400">
                {UI_MESSAGES.DESCRIPTIONS.USERNAME_HINT}
              </p>
            </div>
          )}
        </div>

        {/* Account Information */}
        <div className="bg-neutral-900 rounded-2xl p-6 border border-neutral-800">
          <h2 className="text-xl font-bold text-white mb-6">Account Information</h2>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <p className="text-sm text-gray-400">Email</p>
              <p className="text-white font-medium">{profile?.email}</p>
            </div>

            <div>
              <p className="text-sm text-gray-400">Account Type</p>
              <p className="text-white font-medium capitalize">
                {profile?.provider === "local" ? "Email & Password" : `${profile?.provider} Account`}
              </p>
            </div>

            <div>
              <p className="text-sm text-gray-400">Email Verified</p>
              <div className="flex items-center gap-2 mt-1">
                {profile?.emailVerified ? (
                  <>
                    <svg className="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                    </svg>
                    <span className="text-green-400 font-medium">Verified</span>
                  </>
                ) : (
                  <>
                    <svg className="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.742-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                    </svg>
                    <span className="text-yellow-400 font-medium">Not verified</span>
                  </>
                )}
              </div>
            </div>

            <div>
              <p className="text-sm text-gray-400">Member Since</p>
              <p className="text-white font-medium">
                {profile?.createdAt && new Date(profile.createdAt).toLocaleDateString("en-US", {
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                })}
              </p>
            </div>

            {profile?.lastLogin && (
              <div>
                <p className="text-sm text-gray-400">Last Login</p>
                <p className="text-white font-medium">
                  {new Date(profile.lastLogin).toLocaleString("en-US", {
                    year: "numeric",
                    month: "short",
                    day: "numeric",
                    hour: "2-digit",
                    minute: "2-digit",
                  })}
                </p>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: src/pages/RegisterPage.tsx
================================================
import { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useMutation } from '@tanstack/react-query';
import { authApi } from '../services/api';
import { useAuth } from '../context/AuthContext';
import { useForm } from '../hooks/useForm';
import { validate } from '../utils/validation';
import { UI_MESSAGES } from '../constants/ui.constants';
import type { RegisterRequest } from '../types/auth.types';
import AuthPageLayout from '../components/layout/AuthPageLayout';
import Input from '../components/ui/Input';
import PasswordInput from '../components/ui/PasswordInput';
import Button from '../components/ui/Button';
import GoogleOAuthButton from '../components/ui/GoogleOAuthButton';

export default function RegisterPage() {
  const [error, setError] = useState('');
  const navigate = useNavigate();
  const { login } = useAuth();

  const registerMutation = useMutation({
    mutationFn: authApi.register,
    onSuccess: (data) => {
      login(data);
      setTimeout(() => {
        navigate('/?verification=pending');
      }, 5000);
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.REGISTRATION_FAILED);
    },
  });

  const { values, errors, handleChange, handleSubmit, isSubmitting } = useForm<RegisterRequest>({
    initialValues: {
      email: '',
      username: '',
      password: '',
    },
    validate: (values) => {
      const errors: Partial<Record<keyof RegisterRequest, string>> = {};
      
      const emailError = validate.email(values.email);
      if (emailError) errors.email = emailError;
      
      const usernameError = validate.username(values.username);
      if (usernameError) errors.username = usernameError;
      
      const passwordError = validate.password(values.password);
      if (passwordError) errors.password = passwordError;
      
      return errors;
    },
    onSubmit: (data) => {
      setError('');
      registerMutation.mutate(data);
    },
  });

  return (
    <AuthPageLayout
      title={UI_MESSAGES.TITLES.SIGN_UP_FREE}
      subtitle={UI_MESSAGES.DESCRIPTIONS.SIGN_UP_SUBTITLE}
      logoLink="/register"
    >
      <GoogleOAuthButton text={`${UI_MESSAGES.BUTTONS.SIGN_UP} with Google`} className="mb-6" />

      <div className="my-6 flex items-center">
        <div className="flex-1 border-t border-neutral-800"></div>
        <span className="px-4 text-gray-500 text-sm">OR</span>
        <div className="flex-1 border-t border-neutral-800"></div>
      </div>

      <form onSubmit={handleSubmit} className="space-y-5">
        {error && (
          <div className="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm">
            {error}
          </div>
        )}

        <Input
          name="email"
          type="email"
          value={values.email}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.EMAIL}
          error={errors.email}
          required
        />

        <Input
          name="username"
          value={values.username}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.USERNAME}
          error={errors.username}
          required
          minLength={3}
          maxLength={20}
        />

        <PasswordInput
          name="password"
          value={values.password}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.PASSWORD_MIN_6}
          error={errors.password}
          required
          minLength={6}
        />

        <Button type="submit" variant="primary" fullWidth isLoading={isSubmitting}>
          {UI_MESSAGES.BUTTONS.SIGN_UP}
        </Button>
      </form>

      <div className="mt-8 text-center">
        <p className="text-gray-400 text-sm">
          Already have an account?{' '}
          <Link to="/login" className="text-blue-400 hover:text-blue-300 font-semibold transition">
            {UI_MESSAGES.BUTTONS.SIGN_IN}
          </Link>
        </p>
      </div>
    </AuthPageLayout>
  );
}


================================================
FILE: src/pages/ResendVerificationPage.tsx
================================================
import { useState } from 'react';
import { Link } from 'react-router-dom';
import { useMutation } from '@tanstack/react-query';
import { authApi } from '../services/api';
import { useForm } from '../hooks/useForm';
import { validate } from '../utils/validation';
import { UI_MESSAGES } from '../constants/ui.constants';
import AuthPageLayout from '../components/layout/AuthPageLayout';
import Input from '../components/ui/Input';
import Button from '../components/ui/Button';
import NotificationBanner from '../components/ui/NotificationBanner';

export default function ResendVerificationPage() {
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState('');

  const resendMutation = useMutation({
    mutationFn: authApi.resendVerification,
    onSuccess: () => {
      setSuccess(true);
      setError('');
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.VERIFICATION_FAILED);
      setSuccess(false);
    },
  });

  const { values, errors, handleChange, handleSubmit, isSubmitting } = useForm<{ email: string }>({
    initialValues: { email: '' },
    validate: (values) => {
      const emailError = validate.email(values.email);
      return emailError ? { email: emailError } : {};
    },
    onSubmit: (data) => {
      setError('');
      setSuccess(false);
      resendMutation.mutate(data.email);
    },
  });

  return (
    <AuthPageLayout
      title={UI_MESSAGES.TITLES.RESEND_VERIFICATION}
      subtitle={UI_MESSAGES.DESCRIPTIONS.RESEND_SUBTITLE}
    >
      {success ? (
        <NotificationBanner
          type="success"
          title={UI_MESSAGES.SUCCESS.VERIFICATION_SENT}
          message={UI_MESSAGES.NOTIFICATIONS.EMAIL_VERIFIED_24H}
        />
      ) : (
        <form onSubmit={handleSubmit} className="space-y-6">
          {error && <NotificationBanner type="error" message={error} />}

          <Input
            name="email"
            type="email"
            value={values.email}
            onChange={handleChange}
            placeholder={UI_MESSAGES.PLACEHOLDERS.EMAIL}
            error={errors.email}
            required
          />

          <Button type="submit" variant="primary" fullWidth isLoading={isSubmitting}>
            {UI_MESSAGES.BUTTONS.RESEND_VERIFICATION}
          </Button>
        </form>
      )}

      <div className="mt-8 text-center">
        <Link to="/login" className="text-gray-400 hover:text-white text-sm transition">
          {UI_MESSAGES.BUTTONS.BACK_TO_LOGIN}
        </Link>
      </div>
    </AuthPageLayout>
  );
}


================================================
FILE: src/pages/ResetPasswordPage.tsx
================================================
import { useState } from 'react';
import { useNavigate, useSearchParams, Link } from 'react-router-dom';
import { useMutation } from '@tanstack/react-query';
import { authApi } from '../services/api';
import { useForm } from '../hooks/useForm';
import { validate } from '../utils/validation';
import { UI_MESSAGES } from '../constants/ui.constants';
import type { ResetPasswordRequest } from '../types/auth.types';
import AuthPageLayout from '../components/layout/AuthPageLayout';
import PasswordInput from '../components/ui/PasswordInput';
import Button from '../components/ui/Button';
import NotificationBanner from '../components/ui/NotificationBanner';

export default function ResetPasswordPage() {
  const [searchParams] = useSearchParams();
  const token = searchParams.get('token');
  const navigate = useNavigate();
  const [error, setError] = useState('');

  const resetPasswordMutation = useMutation({
    mutationFn: authApi.resetPassword,
    onSuccess: () => {
      navigate('/login?success=' + encodeURIComponent(UI_MESSAGES.SUCCESS.PASSWORD_RESET));
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || UI_MESSAGES.ERRORS.PASSWORD_RESET_FAILED);
    },
  });

  const { values, errors, handleChange, handleSubmit, isSubmitting } = useForm<{
    newPassword: string;
    confirmPassword: string;
  }>({
    initialValues: {
      newPassword: '',
      confirmPassword: '',
    },
    validate: (values) => {
      const errors: any = {};

      const passwordError = validate.password(values.newPassword);
      if (passwordError) errors.newPassword = passwordError;

      const matchError = validate.passwordMatch(values.newPassword, values.confirmPassword);
      if (matchError) errors.confirmPassword = matchError;

      return errors;
    },
    onSubmit: (data) => {
      if (!token) {
        setError(UI_MESSAGES.ERRORS.INVALID_RESET_TOKEN);
        return;
      }
      setError('');
      const payload: ResetPasswordRequest = { token, newPassword: data.newPassword };
      resetPasswordMutation.mutate(payload);
    },
  });

  if (!token) {
    return (
      <AuthPageLayout title={UI_MESSAGES.TITLES.INVALID_LINK} subtitle="" showLogo={false}>
        <div className="text-center">
          <p className="text-gray-400 mb-8">{UI_MESSAGES.NOTIFICATIONS.INVALID_RESET_LINK}</p>
          <Link
            to="/forgot-password"
            className="inline-block bg-green-500 hover:bg-green-400 text-black font-semibold py-3 px-6 rounded-full transition"
          >
            {UI_MESSAGES.BUTTONS.REQUEST_NEW_LINK}
          </Link>
        </div>
      </AuthPageLayout>
    );
  }

  return (
    <AuthPageLayout
      title={UI_MESSAGES.TITLES.CHOOSE_NEW_PASSWORD}
      subtitle={UI_MESSAGES.DESCRIPTIONS.NEW_PASSWORD_SUBTITLE}
    >
      <form onSubmit={handleSubmit} className="space-y-6">
        {error && <NotificationBanner type="error" message={error} />}

        <PasswordInput
          name="newPassword"
          value={values.newPassword}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.NEW_PASSWORD}
          error={errors.newPassword}
          required
          minLength={6}
        />

        <PasswordInput
          name="confirmPassword"
          value={values.confirmPassword}
          onChange={handleChange}
          placeholder={UI_MESSAGES.PLACEHOLDERS.CONFIRM_PASSWORD}
          error={errors.confirmPassword}
          required
          minLength={6}
        />

        <Button type="submit" variant="primary" fullWidth isLoading={isSubmitting}>
          {UI_MESSAGES.BUTTONS.RESET_PASSWORD}
        </Button>
      </form>

      <div className="mt-8 text-center">
        <Link to="/login" className="text-gray-400 hover:text-white text-sm transition">
          {UI_MESSAGES.BUTTONS.BACK_TO_LOGIN}
        </Link>
      </div>
    </AuthPageLayout>
  );
}


================================================
FILE: src/pages/VerifyEmailPage.tsx
================================================
import { useEffect, useState } from 'react';
import { useNavigate, useSearchParams, Link } from 'react-router-dom';
import { useMutation } from '@tanstack/react-query';
import { authApi } from '../services/api';

export default function VerifyEmailPage() {
  const [searchParams] = useSearchParams();
  const token = searchParams.get('token');
  const navigate = useNavigate();

  const [error, setError] = useState('');
  const [success, setSuccess] = useState(false);

  const verifyMutation = useMutation({
    mutationFn: authApi.verifyEmail,
    onSuccess: () => {
      setSuccess(true);
      setTimeout(() => {
        navigate('/login?success=Email verified! You can now sign in.');
      }, 3000);
    },
    onError: (error: any) => {
      setError(error.response?.data?.message || 'Verification failed');
    },
  });

  useEffect(() => {
    if (token) {
      verifyMutation.mutate(token);
    } else {
      setError('Invalid verification link');
    }
  }, [token]);

  return (
    <div className="min-h-screen bg-gradient-to-b from-black via-neutral-900 to-black flex items-center justify-center px-4">
      <div className="w-full max-w-md">
        <div className="text-center mb-8">
          <div className="w-16 h-16 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-green-500/50">
            <span className="text-3xl">√∞≈∏≈Ω¬µ</span>
          </div>
          <h1 className="text-4xl font-bold text-white mb-2">Email Verification</h1>
        </div>

        {verifyMutation.isPending && (
          <div className="bg-neutral-900 rounded-2xl p-8 text-center">
            <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-green-400 mx-auto mb-4"></div>
            <p className="text-gray-400">Verifying your email...</p>
          </div>
        )}

        {success && (
          <div className="bg-green-500/10 border border-green-500/20 rounded-2xl p-8">
            <div className="flex items-center justify-center mb-4">
              <div className="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center">
                <svg className="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
            </div>
            <h2 className="text-2xl font-bold text-green-400 mb-2 text-center">Email Verified!</h2>
            <p className="text-green-300 text-center mb-4">
              Your email has been successfully verified. Redirecting to login...
            </p>
          </div>
        )}

        {error && (
          <div className="bg-red-500/10 border border-red-500/20 rounded-2xl p-8">
            <div className="flex items-center justify-center mb-4">
              <div className="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center">
                <svg className="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </div>
            </div>
            <h2 className="text-2xl font-bold text-red-400 mb-2 text-center">Verification Failed</h2>
            <p className="text-red-300 text-center mb-6">{error}</p>
            <div className="text-center">
              <Link
                to="/resend-verification"
                className="inline-block bg-green-500 hover:bg-green-400 text-black font-semibold py-3 px-6 rounded-full transition transform hover:scale-105"
              >
                Request new verification link
              </Link>
            </div>
          </div>
        )}

        <div className="mt-8 text-center">
          <Link to="/login" className="text-gray-400 hover:text-white text-sm transition">
            Back to login
          </Link>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: src/services/api.ts
================================================
import {
  API_BASE_URL,
  API_ENDPOINTS,
  STORAGE_KEYS,
} from "../constants/api.constants";
import type {
  AuthResponse,
  LoginRequest,
  RegisterRequest,
  ResetPasswordRequest,
  MessageResponse,
  UserProfile,
} from "../types/auth.types";



import apiClient from './apiClient';

export const authApi = {
  register: async (data: RegisterRequest): Promise<AuthResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.REGISTER, data);
    return response.data;
  },

  login: async (data: LoginRequest): Promise<AuthResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.LOGIN, data);
    return response.data;
  },

  getCurrentUser: async (): Promise<AuthResponse> => {
    const response = await apiClient.get(API_ENDPOINTS.AUTH.ME);
    return response.data;
  },

  loginWithGoogle: () => {
    window.location.href = API_ENDPOINTS.OAUTH.GOOGLE;
  },

  forgotPassword: async (email: string): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, { email });
    return response.data;
  },

  resetPassword: async (
    data: ResetPasswordRequest
  ): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.RESET_PASSWORD, data);
    return response.data;
  },

  deactivateAccount: async (): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.DEACTIVATE_ACCOUNT);
    return response.data;
  },

  cancelDeactivation: async (): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.CANCEL_DEACTIVATION);
    return response.data;
  },

  verifyEmail: async (token: string): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.VERIFY_EMAIL, { token });
    return response.data;
  },

  resendVerification: async (email: string): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.AUTH.RESEND_VERIFICATION, {
      email,
    });
    return response.data;
  },
};

export const profileApi = {
  getProfile: async (): Promise<UserProfile> => {
    const response = await apiClient.get(API_ENDPOINTS.PROFILE.GET);
    return response.data;
  },

  updateUsername: async (username: string): Promise<UserProfile> => {
    const response = await apiClient.put(API_ENDPOINTS.PROFILE.UPDATE_USERNAME, {
      username,
    });
    return response.data;
  },

  updateProfilePhoto: async (profilePhotoUrl: string): Promise<UserProfile> => {
    const response = await apiClient.put(API_ENDPOINTS.PROFILE.UPDATE_PHOTO, {
      profilePhotoUrl,
    });
    return response.data;
  },

  removeProfilePhoto: async (): Promise<UserProfile> => {
    const response = await apiClient.delete(API_ENDPOINTS.PROFILE.REMOVE_PHOTO);
    return response.data;
  },

  requestVerification: async (): Promise<MessageResponse> => {
    const response = await apiClient.post(API_ENDPOINTS.PROFILE.REQUEST_VERIFICATION);
    return response.data;
  },
};




================================================
FILE: src/services/apiClient.ts
================================================
import axios from "axios";
import { API_BASE_URL, STORAGE_KEYS } from "../constants/api.constants";

export const apiClient = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    "Content-Type": "application/json",
  },
});

apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem(STORAGE_KEYS.TOKEN);
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    // Handle 401 errors globally
    if (error.response?.status === 401) {
      localStorage.removeItem(STORAGE_KEYS.TOKEN);
      window.location.href =
        "/login?error=Session expired. Please login again.";
    }
    return Promise.reject(error);
  }
);

export default apiClient;



================================================
FILE: src/services/musicApi.ts
================================================
import axios from 'axios';
import { MUSIC_API_BASE_URL, MUSIC_ENDPOINTS } from '../constants/api.constants';

export const musicApiClient = axios.create({
  baseURL: MUSIC_API_BASE_URL,
  headers: { 'Content-Type': 'application/json' },
});

export const musicApi = {
  getSongs: async () => {
    const response = await musicApiClient.get(MUSIC_ENDPOINTS.SONGS.LIST);
    return response.data.songs;
  },

  getAlbums: async () => {
    const response = await musicApiClient.get(MUSIC_ENDPOINTS.ALBUMS.LIST);
    return response.data.albums;
  },

  addSong: async (formData: FormData) => {
    const response = await musicApiClient.post(MUSIC_ENDPOINTS.SONGS.ADD, formData, {
      headers: { 'Content-Type': 'multipart/form-data' },
    });
    return response.data;
  },

  removeSong: async (id: string) => {
    const response = await musicApiClient.delete(`${MUSIC_ENDPOINTS.SONGS.REMOVE}/${id}`);
    return response.data;
  },

  addAlbum: async (formData: FormData) => {
    const response = await musicApiClient.post(MUSIC_ENDPOINTS.ALBUMS.ADD, formData, {
      headers: { 'Content-Type': 'multipart/form-data' },
    });
    return response.data;
  },

  removeAlbum: async (id: string) => {
    const response = await musicApiClient.delete(`${MUSIC_ENDPOINTS.ALBUMS.REMOVE}/${id}`);
    return response.data;
  },
};


================================================
FILE: src/types/auth.types.ts
================================================
export interface User {
  userId: string;
  email: string;
  username: string;
  profileImageUrl?: string;
}

export interface AuthResponse {
  token: string;
  userId: string;
  email: string;
  username: string;
  profileImageUrl?: string;
}

export interface RegisterRequest {
  email: string;
  username: string;
  password: string;
}

export interface LoginRequest {
  emailOrUsername: string;
  password: string;
}

export interface ResetPasswordRequest {
  token: string;
  newPassword: string;
}

export interface MessageResponse {
  message: string;
}


export interface EmailRequest {
   email: string;
}


export interface UserProfile {
  userId: string;
  email: string;
  username: string;
  profileImageUrl?: string;
  emailVerified: boolean;
  provider?: string;
  createdAt: string;
  lastLogin: string;
}

export interface UpdateUsernameRequest {
  username: string;
}

export interface UpdateProfilePhotoRequest {
  profilePhotoUrl: string;
}


================================================
FILE: src/utils/validation.ts
================================================
export const ValidationRules = {
  EMAIL: {
    pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
    message: 'Please enter a valid email address',
  },
  USERNAME: {
    minLength: 3,
    maxLength: 20,
    pattern: /^[a-zA-Z0-9_]+$/,
    message: 'Username must be 3-20 characters and contain only letters, numbers, and underscores',
  },
  PASSWORD: {
    minLength: 6,
    message: 'Password must be at least 6 characters',
  },
  URL: {
    pattern: /^https?:\/\/.+/,
    message: 'Please enter a valid URL starting with http:// or https://',
  },
};

export const validate = {
  email: (email: string): string | null => {
    if (!email) return 'Email is required';
    if (!ValidationRules.EMAIL.pattern.test(email)) {
      return ValidationRules.EMAIL.message;
    }
    return null;
  },

  username: (username: string): string | null => {
    if (!username) return 'Username is required';
    if (username.length < ValidationRules.USERNAME.minLength || username.length > ValidationRules.USERNAME.maxLength) {
      return `Username must be between ${ValidationRules.USERNAME.minLength} and ${ValidationRules.USERNAME.maxLength} characters`;
    }
    if (!ValidationRules.USERNAME.pattern.test(username)) {
      return 'Username can only contain letters, numbers, and underscores';
    }
    return null;
  },

  password: (password: string): string | null => {
    if (!password) return 'Password is required';
    if (password.length < ValidationRules.PASSWORD.minLength) {
      return ValidationRules.PASSWORD.message;
    }
    return null;
  },

  passwordMatch: (password: string, confirmPassword: string): string | null => {
    if (password !== confirmPassword) {
      return 'Passwords do not match';
    }
    return null;
  },

  url: (url: string): string | null => {
    if (!url) return 'URL is required';
    if (!ValidationRules.URL.pattern.test(url)) {
      return ValidationRules.URL.message;
    }
    return null;
  },

  required: (value: string, fieldName: string = 'This field'): string | null => {
    if (!value || !value.trim()) {
      return `${fieldName} is required`;
    }
    return null;
  },
};

